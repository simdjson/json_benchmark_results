run_benchmark: v0.8.0~23 /home/jkeiser/simdjson_benchmark_results/v0.7.0/15/skylake-x-clang11.json -DCMAKE_BUILD_TYPE=Release
git reset --hard v0.8.0~23
HEAD is now at 22846f75 Merge pull request #1363 from simdjson/jkeiser/ondemand-benchmarks
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_RULE_MESSAGES:BOOL=OFF -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON ..
-- The simdjson repository appears to be standalone.
-- By default, we attempt to build everything.
-- Building a dynamic library.
-- Library output directory: /home/jkeiser/simdjson_benchmark_results/simdjson/build
-- Importing google_benchmarks (google/benchmark@8982e1e)
-- Failed to find LLVM FileCheck
-- git Version: v0.2.1-22846f75
-- Version: 0.2.1
-- Performing Test HAVE_THREAD_SAFETY_ATTRIBUTES -- failed to compile
-- Performing Test HAVE_STD_REGEX -- success
-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile
-- Performing Test HAVE_POSIX_REGEX -- success
-- Performing Test HAVE_STEADY_CLOCK -- success
-- Importing cjson (DaveGamble/cJSON@c69134d)
-- Importing fastjson (mikeando/fastjson@485f994)
-- Importing gason (vivkin/gason@7aee524)
-- Importing jsmn (zserge/jsmn@18e9fe4)
-- Importing json (nlohmann/json@v3.9.1)
-- Importing json11 (dropbox/json11@ec4e452)
-- Importing rapidjson (Tencent/rapidjson@b32cd94)
-- Importing sajson (chadaustin/sajson@2dcfd35)
-- Importing ujson4c (esnme/ujson4c@e14f3fd)
-- Importing yyjson (ibireme/yyjson@aa33ec5)
-- Importing cxxopts (jarro2783/cxxopts@794c975)
-- cxxopts version 2.2.0
-- We have cxxopts as a dependency and we are buiding the tools (e.g., json2json).
-- Git is available and it is recent. We are enabling checkperf targets.
-- Configuring done
-- Generating done
-- Build files have been written to: /home/jkeiser/simdjson_benchmark_results/simdjson/build
make bench_ondemand
/usr/bin/cmake -S/home/jkeiser/simdjson_benchmark_results/simdjson -B/home/jkeiser/simdjson_benchmark_results/simdjson/build --check-build-system CMakeFiles/Makefile.cmake 0
make -f CMakeFiles/Makefile2 bench_ondemand
/usr/bin/cmake -S/home/jkeiser/simdjson_benchmark_results/simdjson -B/home/jkeiser/simdjson_benchmark_results/simdjson/build --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/jkeiser/simdjson_benchmark_results/simdjson/build/CMakeFiles 11
make -f CMakeFiles/Makefile2 benchmark/CMakeFiles/bench_ondemand.dir/all
make -f _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build.make _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/google_benchmarks/src /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/_deps/google_benchmarks/src /home/jkeiser/simdjson_benchmark_results/simdjson/build/_deps/google_benchmarks/src/CMakeFiles/benchmark.dir/DependInfo.cmake --color=
make -f _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build.make _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build
make[3]: Nothing to be done for '_deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build'.
[ 72%] Built target benchmark
make -f jsonexamples/generated/CMakeFiles/generated-data.dir/build.make jsonexamples/generated/CMakeFiles/generated-data.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/jsonexamples/generated /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/generated /home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/generated/CMakeFiles/generated-data.dir/DependInfo.cmake --color=
make -f jsonexamples/generated/CMakeFiles/generated-data.dir/build.make jsonexamples/generated/CMakeFiles/generated-data.dir/build
make[3]: Nothing to be done for 'jsonexamples/generated/CMakeFiles/generated-data.dir/build'.
[ 72%] Built target generated-data
make -f src/CMakeFiles/simdjson.dir/build.make src/CMakeFiles/simdjson.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/src /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/src /home/jkeiser/simdjson_benchmark_results/simdjson/build/src/CMakeFiles/simdjson.dir/DependInfo.cmake --color=
make -f src/CMakeFiles/simdjson.dir/build.make src/CMakeFiles/simdjson.dir/build
make[3]: Nothing to be done for 'src/CMakeFiles/simdjson.dir/build'.
[ 81%] Built target simdjson
make -f dependencies/CMakeFiles/yyjson.dir/build.make dependencies/CMakeFiles/yyjson.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/dependencies /home/jkeiser/simdjson_benchmark_results/simdjson/build/dependencies/CMakeFiles/yyjson.dir/DependInfo.cmake --color=
make -f dependencies/CMakeFiles/yyjson.dir/build.make dependencies/CMakeFiles/yyjson.dir/build
make[3]: Nothing to be done for 'dependencies/CMakeFiles/yyjson.dir/build'.
[ 90%] Built target yyjson
make -f benchmark/CMakeFiles/bench_ondemand.dir/build.make benchmark/CMakeFiles/bench_ondemand.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/benchmark /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark/CMakeFiles/bench_ondemand.dir/DependInfo.cmake --color=
Scanning dependencies of target bench_ondemand
make -f benchmark/CMakeFiles/bench_ondemand.dir/build.make benchmark/CMakeFiles/bench_ondemand.dir/build
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark && /usr/bin/clang++-11  -DSIMDJSON_BENCHMARK_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/\" -DSIMDJSON_COMPETITION_YYJSON -DSIMDJSON_MINEFIELD_TEST_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/jsonchecker/minefield/\" -DSIMDJSON_TEST_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/jsonchecker/\" -DSIMDJSON_THREADS_ENABLED=1 -DSIMDJSON_USING_LIBRARY=1 -I/home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/. -I/home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/linux -I/home/jkeiser/simdjson_benchmark_results/simdjson/include -I/home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/google_benchmarks/src/../include -isystem /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/yyjson/src  -O3 -DNDEBUG   -pthread -std=c++17 -o CMakeFiles/bench_ondemand.dir/bench_ondemand.cpp.o -c /home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/bench_ondemand.cpp
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark && /usr/bin/cmake -E cmake_link_script CMakeFiles/bench_ondemand.dir/link.txt --verbose=1
/usr/bin/clang++-11  -O3 -DNDEBUG   CMakeFiles/bench_ondemand.dir/bench_ondemand.cpp.o  -o bench_ondemand  -Wl,-rpath,/home/jkeiser/simdjson_benchmark_results/simdjson/build ../libsimdjson.so.6.0.0 ../_deps/google_benchmarks/src/libbenchmark.a ../dependencies/libyyjson.a -pthread /usr/lib/x86_64-linux-gnu/librt.so 
[100%] Built target bench_ondemand
/usr/bin/cmake -E cmake_progress_start /home/jkeiser/simdjson_benchmark_results/simdjson/build/CMakeFiles 0
benchmark/bench_ondemand --benchmark_counters_tabular=true --benchmark_out=/home/jkeiser/simdjson_benchmark_results/v0.7.0/15/skylake-x-clang11.json --benchmark_out_format=json
2021-01-24 23:08:45
Running benchmark/bench_ondemand
Run on (4 X 3200 MHz CPU s)
CPU Caches:
  L1 Data 32 KiB (x4)
  L1 Instruction 32 KiB (x4)
  L2 Unified 1024 KiB (x4)
  L3 Unified 8448 KiB (x1)
Load Average: 1.06, 1.02, 1.00
***WARNING*** CPU scaling is enabled, the benchmark real time measurements may be noisy and will incur extra overhead.
simdjson::dom implementation:      haswell
simdjson::ondemand implementation: fallback
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations best_branch_miss best_bytes_per_sec best_cache_miss best_cache_ref best_cycles best_cycles_per_byte best_docs_per_sec best_frequency best_instructions best_instructions_per_byte best_instructions_per_cycle best_items_per_sec branch_miss      bytes bytes_per_second cache_miss  cache_ref     cycles cycles_per_byte docs_per_sec  frequency instructions instructions_per_byte instructions_per_cycle      items items_per_second
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
partial_tweets<simdjson_dom>                  329328 ns       329322 ns         2115            3.48k           2.02861G               1        30.689k    994.163k              1.57425          3.21229k       3.19354G          2.98281M                    4.72326                     3.00032           321.229k    3.60439k   631.515k       1.78593G/s      1.174   30.9206k   1000.15k         1.58374   3.03655k/s 3.03702G/s     2.98281M               4.72326                2.98235        100       303.655k/s [BEST: throughput=  2.03 GB/s doc_throughput=  3212 docs/s instructions=     2982809 cycles=      994163 branch_miss=    3480 cache_miss=       1 cache_ref=     30689 items=       100 avg_time=    313482 ns]
partial_tweets<simdjson_ondemand>            1465573 ns      1465544 ns          478          33.254k             438.9M               0         7.224k    4.59391M              7.27443           694.996       3.19275G          10.9856M                    17.3956                     2.39133           69.4996k    34.1405k   631.515k       410.946M/s   0.041841   7.45642k   4.62789M         7.32824    682.341/s  3.1578G/s     10.9856M               17.3956                2.37377        100       68.2341k/s [BEST: throughput=  0.44 GB/s doc_throughput=   694 docs/s instructions=    10985555 cycles=     4593913 branch_miss=   33254 cache_miss=       0 cache_ref=      7224 items=       100 avg_time=   1450515 ns]
partial_tweets<yyjson>                        802072 ns       802050 ns          872          10.195k           1.22611G             508          24.1k    1.44588M              2.28954          1.94154k       2.80723G          2.91927M                    4.62264                     2.01903           194.154k    7.61901k   631.515k         750.9M/s    608.803   23.6133k    1.5492M         2.45316    1.2468k/s 1.93156G/s      2.9197M               4.62332                1.88464        100        124.68k/s [BEST: throughput=  1.23 GB/s doc_throughput=  1941 docs/s instructions=     2919266 cycles=     1445876 branch_miss=   10195 cache_miss=     508 cache_ref=     24100 items=       100 avg_time=    784317 ns]
Creating a source file spanning 44921 KB 
large_random<simdjson_dom>                 101252103 ns    101249318 ns            7         976.988k           456.349M        6.72262M       6.89509M    321.352M              6.98609            9.9209        3.1881G          1038.74M                    22.5819                      3.2324             9.9209    978.476k   45.9988M       433.266M/s   6.79013M   6.89548M   322.747M         7.01643    9.87661/s 3.18765G/s     1038.74M               22.5819                3.21843          1        9.87661/s [BEST: throughput=  0.46 GB/s doc_throughput=     9 docs/s instructions=  1038738117 cycles=   321351618 branch_miss=  976988 cache_miss= 6722617 cache_ref=   6895092 items=         1 avg_time= 101223174 ns]
large_random<simdjson_ondemand>            121407118 ns    121403779 ns            6         1.30046M           381.093M        3.44365M       3.57437M    384.946M              8.36862           8.28485       3.18922G          1.21898G                    26.5002                     3.16661            8.28485    1.29865M   45.9988M       361.338M/s   3.49582M   3.57419M   387.079M         8.41498    8.23698/s 3.18836G/s     1.21898G               26.5002                3.14917          1        8.23698/s [BEST: throughput=  0.38 GB/s doc_throughput=     8 docs/s instructions=  1218976308 cycles=   384946230 branch_miss= 1300462 cache_miss= 3443653 cache_ref=   3574370 items=         1 avg_time= 121379550 ns]
large_random<simdjson_ondemand_unordered>  120352474 ns    120347630 ns            6         1.29651M           382.845M        3.49373M       3.57382M    383.184M               8.3303           8.32295       3.18922G          1.22398G                    26.6089                     3.19423            8.32295    1.29715M   45.9988M       364.509M/s    3.5084M   3.57406M   383.701M         8.34156    8.30926/s 3.18827G/s     1.22398G               26.6089                3.18992          1        8.30926/s [BEST: throughput=  0.38 GB/s doc_throughput=     8 docs/s instructions=  1223976308 cycles=   383183583 branch_miss= 1296510 cache_miss= 3493734 cache_ref=   3573824 items=         1 avg_time= 120323842 ns]
large_random<yyjson>                       145734338 ns    145722551 ns            5         680.802k           315.947M        4.19967M       4.32019M     325.64M              7.07931           6.86859       2.23668G          855.681M                    18.6023                     2.62769            6.86859    680.605k   45.9988M       301.037M/s    4.2003M   4.32211M   326.032M         7.08785    6.86236/s 2.23735G/s     855.681M               18.6023                2.62453          1        6.86236/s [BEST: throughput=  0.32 GB/s doc_throughput=     6 docs/s instructions=   855680760 cycles=   325639539 branch_miss=  680802 cache_miss= 4199668 cache_ref=   4320194 items=         1 avg_time= 145701651 ns]
Creating a source file spanning 134087 KB 
kostya<simdjson_dom>                       107269530 ns    107268504 ns            7         1021.97k           1.28151G        10.1809M       10.3174M    341.646M              2.48823           9.33332       3.18869G          984.675M                    7.17144                     2.88215            9.33332    1021.86k   137.305M        1.1921G/s      10.2M   10.3174M   341.937M         2.49035     9.3224/s 3.18767G/s     984.675M               7.17144                 2.8797          1         9.3224/s [BEST: throughput=  1.28 GB/s doc_throughput=     9 docs/s instructions=   984674902 cycles=   341646119 branch_miss= 1021969 cache_miss=10180911 cache_ref=  10317412 items=         1 avg_time= 107239478 ns]
kostya<simdjson_ondemand>                  222784744 ns    222778310 ns            3         686.454k           616.558M        6.42038M       6.47313M    710.377M              5.17372           4.49043        3.1899G          2.21249G                    16.1137                     3.11453            4.49043    686.899k   137.305M       587.778M/s   6.42165M   6.47327M   710.487M         5.17452    4.48877/s 3.18921G/s     2.21249G               16.1137                3.11405          1        4.48877/s [BEST: throughput=  0.62 GB/s doc_throughput=     4 docs/s instructions=  2212492375 cycles=   710377024 branch_miss=  686454 cache_miss= 6420383 cache_ref=   6473133 items=         1 avg_time= 222752356 ns]
------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations
------------------------------------------------------------------------------------
kostya<yyjson>                            ERROR OCCURRED: 'warmup document reading failed'
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations best_branch_miss best_bytes_per_sec best_cache_miss best_cache_ref best_cycles best_cycles_per_byte best_docs_per_sec best_frequency best_instructions best_instructions_per_byte best_instructions_per_cycle best_items_per_sec branch_miss      bytes bytes_per_second cache_miss  cache_ref     cycles cycles_per_byte docs_per_sec  frequency instructions instructions_per_byte instructions_per_cycle      items items_per_second
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
distinct_user_id<simdjson_dom>                327702 ns       327699 ns         2137           3.644k           2.07472G               3        32.833k    972.083k              1.53929           3.2853k       3.19359G          2.91783M                    4.62037                     3.00163            377.81k    3.82639k   631.515k       1.79477G/s    1.89144   32.8664k   979.679k         1.55132   3.05158k/s 2.98957G/s     2.91783M               4.62037                2.97835        115       350.932k/s [BEST: throughput=  2.07 GB/s doc_throughput=  3285 docs/s instructions=     2917831 cycles=      972083 branch_miss=    3644 cache_miss=       3 cache_ref=     32833 items=       115 avg_time=    307040 ns]
distinct_user_id<simdjson_ondemand>          1413271 ns      1413258 ns          495          32.232k           457.605M               0         3.678k    4.40615M              6.97711           724.614       3.19276G          10.6053M                    16.7934                     2.40693           83.3306k    33.4936k   631.515k        426.15M/s   0.125253   3.68834k   4.45089M         7.04796    707.585/s 3.14938G/s     10.6053M               16.7934                2.38274        115       81.3722k/s [BEST: throughput=  0.46 GB/s doc_throughput=   724 docs/s instructions=    10605305 cycles=     4406149 branch_miss=   32232 cache_miss=       0 cache_ref=      3678 items=       115 avg_time=   1394992 ns]
distinct_user_id<yyjson>                      804098 ns       804075 ns          937           9.874k           1.24993G             217        23.601k    1.41463M              2.24006          1.97925k       2.79991G          2.87813M                     4.5575                     2.03455           227.614k    7.71982k   631.515k       749.009M/s    444.916   23.6144k   1.53799M         2.43539   1.24366k/s 1.91274G/s     2.87849M               4.55807                1.87159        115       143.021k/s [BEST: throughput=  1.25 GB/s doc_throughput=  1979 docs/s instructions=     2878131 cycles=     1414631 branch_miss=    9874 cache_miss=     217 cache_ref=     23601 items=       115 avg_time=    780062 ns]
find_tweet<simdjson_dom>                      308109 ns       308102 ns         2273           3.358k           2.20124G              45        27.795k    916.243k              1.45086          3.48566k       3.19371G          2.83251M                    4.48526                     3.09144           3.48566k       3.48k   631.515k       1.90892G/s    46.6476   27.9728k   922.587k         1.46091   3.24567k/s 2.99442G/s     2.83251M               4.48526                3.07018          1       3.24567k/s [BEST: throughput=  2.20 GB/s doc_throughput=  3485 docs/s instructions=     2832511 cycles=      916243 branch_miss=    3358 cache_miss=      45 cache_ref=     27795 items=         1 avg_time=    289131 ns]
find_tweet<simdjson_ondemand>                1361815 ns      1361788 ns          514          32.109k           473.408M               2         2.584k    4.25892M              6.74398           749.639       3.19266G          10.0995M                    15.9925                     2.37138            749.639    33.0104k   631.515k       442.257M/s    2.11479   2.61199k   4.29152M          6.7956    734.329/s 3.15139G/s     10.0995M               15.9925                2.35336          1        734.329/s [BEST: throughput=  0.47 GB/s doc_throughput=   749 docs/s instructions=    10099505 cycles=     4258922 branch_miss=   32109 cache_miss=       2 cache_ref=      2584 items=         1 avg_time=   1345010 ns]
find_tweet<yyjson>                            784969 ns       784935 ns          896           9.488k           1.30124G             335        20.883k    1.35333M                2.143           2.0605k       2.78855G           2.8173M                    4.46117                     2.08174            2.0605k     7.4536k   631.515k       767.273M/s    347.953   19.9523k   1.48859M         2.35717   1.27399k/s 1.89644G/s     2.81773M               4.46186                1.89289          1       1.27399k/s [BEST: throughput=  1.30 GB/s doc_throughput=  2060 docs/s instructions=     2817296 cycles=     1353335 branch_miss=    9488 cache_miss=     335 cache_ref=     20883 items=         1 avg_time=    764029 ns]
