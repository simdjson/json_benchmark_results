run_benchmark: v0.8.0~23 /home/jkeiser/simdjson_benchmark_results/v0.7.0/15/skylake-gcc10.2.json -DCMAKE_BUILD_TYPE=Release
git reset --hard v0.8.0~23
HEAD is now at 22846f75 Merge pull request #1363 from simdjson/jkeiser/ondemand-benchmarks
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_RULE_MESSAGES:BOOL=OFF -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON ..
-- The simdjson repository appears to be standalone.
-- By default, we attempt to build everything.
-- Building a dynamic library.
-- Library output directory: /home/jkeiser/simdjson_benchmark_results/simdjson/build
-- Importing google_benchmarks (google/benchmark@8982e1e)
-- Failed to find LLVM FileCheck
-- git Version: v0.2.1-22846f75
-- Version: 0.2.1
-- Performing Test HAVE_STD_REGEX -- success
-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile
-- Performing Test HAVE_POSIX_REGEX -- success
-- Performing Test HAVE_STEADY_CLOCK -- success
-- Importing cjson (DaveGamble/cJSON@c69134d)
-- Importing fastjson (mikeando/fastjson@485f994)
-- Importing gason (vivkin/gason@7aee524)
-- Importing jsmn (zserge/jsmn@18e9fe4)
-- Importing json (nlohmann/json@v3.9.1)
-- Importing json11 (dropbox/json11@ec4e452)
-- Importing rapidjson (Tencent/rapidjson@b32cd94)
-- Importing sajson (chadaustin/sajson@2dcfd35)
-- Importing ujson4c (esnme/ujson4c@e14f3fd)
-- Importing yyjson (ibireme/yyjson@aa33ec5)
-- Importing cxxopts (jarro2783/cxxopts@794c975)
-- cxxopts version 2.2.0
-- We have cxxopts as a dependency and we are buiding the tools (e.g., json2json).
-- Git is available and it is recent. We are enabling checkperf targets.
-- Configuring done
-- Generating done
-- Build files have been written to: /home/jkeiser/simdjson_benchmark_results/simdjson/build
make bench_ondemand
/usr/bin/cmake -S/home/jkeiser/simdjson_benchmark_results/simdjson -B/home/jkeiser/simdjson_benchmark_results/simdjson/build --check-build-system CMakeFiles/Makefile.cmake 0
make -f CMakeFiles/Makefile2 bench_ondemand
/usr/bin/cmake -S/home/jkeiser/simdjson_benchmark_results/simdjson -B/home/jkeiser/simdjson_benchmark_results/simdjson/build --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/jkeiser/simdjson_benchmark_results/simdjson/build/CMakeFiles 11
make -f CMakeFiles/Makefile2 benchmark/CMakeFiles/bench_ondemand.dir/all
make -f _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build.make _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/google_benchmarks/src /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/_deps/google_benchmarks/src /home/jkeiser/simdjson_benchmark_results/simdjson/build/_deps/google_benchmarks/src/CMakeFiles/benchmark.dir/DependInfo.cmake --color=
make -f _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build.make _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build
make[3]: Nothing to be done for '_deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build'.
[ 72%] Built target benchmark
make -f jsonexamples/generated/CMakeFiles/generated-data.dir/build.make jsonexamples/generated/CMakeFiles/generated-data.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/jsonexamples/generated /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/generated /home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/generated/CMakeFiles/generated-data.dir/DependInfo.cmake --color=
make -f jsonexamples/generated/CMakeFiles/generated-data.dir/build.make jsonexamples/generated/CMakeFiles/generated-data.dir/build
make[3]: Nothing to be done for 'jsonexamples/generated/CMakeFiles/generated-data.dir/build'.
[ 72%] Built target generated-data
make -f src/CMakeFiles/simdjson.dir/build.make src/CMakeFiles/simdjson.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/src /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/src /home/jkeiser/simdjson_benchmark_results/simdjson/build/src/CMakeFiles/simdjson.dir/DependInfo.cmake --color=
make -f src/CMakeFiles/simdjson.dir/build.make src/CMakeFiles/simdjson.dir/build
make[3]: Nothing to be done for 'src/CMakeFiles/simdjson.dir/build'.
[ 81%] Built target simdjson
make -f dependencies/CMakeFiles/yyjson.dir/build.make dependencies/CMakeFiles/yyjson.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/dependencies /home/jkeiser/simdjson_benchmark_results/simdjson/build/dependencies/CMakeFiles/yyjson.dir/DependInfo.cmake --color=
make -f dependencies/CMakeFiles/yyjson.dir/build.make dependencies/CMakeFiles/yyjson.dir/build
make[3]: Nothing to be done for 'dependencies/CMakeFiles/yyjson.dir/build'.
[ 90%] Built target yyjson
make -f benchmark/CMakeFiles/bench_ondemand.dir/build.make benchmark/CMakeFiles/bench_ondemand.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/benchmark /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark/CMakeFiles/bench_ondemand.dir/DependInfo.cmake --color=
Scanning dependencies of target bench_ondemand
make -f benchmark/CMakeFiles/bench_ondemand.dir/build.make benchmark/CMakeFiles/bench_ondemand.dir/build
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark && /usr/bin/g++-10  -DSIMDJSON_BENCHMARK_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/\" -DSIMDJSON_COMPETITION_YYJSON -DSIMDJSON_MINEFIELD_TEST_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/jsonchecker/minefield/\" -DSIMDJSON_TEST_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/jsonchecker/\" -DSIMDJSON_THREADS_ENABLED=1 -DSIMDJSON_USING_LIBRARY=1 -I/home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/. -I/home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/linux -I/home/jkeiser/simdjson_benchmark_results/simdjson/include -I/home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/google_benchmarks/src/../include -isystem /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/yyjson/src  -O3 -DNDEBUG   -pthread -std=c++17 -o CMakeFiles/bench_ondemand.dir/bench_ondemand.cpp.o -c /home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/bench_ondemand.cpp
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark && /usr/bin/cmake -E cmake_link_script CMakeFiles/bench_ondemand.dir/link.txt --verbose=1
/usr/bin/g++-10  -O3 -DNDEBUG   CMakeFiles/bench_ondemand.dir/bench_ondemand.cpp.o  -o bench_ondemand  -Wl,-rpath,/home/jkeiser/simdjson_benchmark_results/simdjson/build ../libsimdjson.so.6.0.0 ../_deps/google_benchmarks/src/libbenchmark.a ../dependencies/libyyjson.a -pthread /usr/lib/x86_64-linux-gnu/librt.so 
[100%] Built target bench_ondemand
/usr/bin/cmake -E cmake_progress_start /home/jkeiser/simdjson_benchmark_results/simdjson/build/CMakeFiles 0
benchmark/bench_ondemand --benchmark_counters_tabular=true --benchmark_out=/home/jkeiser/simdjson_benchmark_results/v0.7.0/15/skylake-gcc10.2.json --benchmark_out_format=json
2021-01-25 02:09:19
Running benchmark/bench_ondemand
Run on (4 X 4000 MHz CPU s)
CPU Caches:
  L1 Data 32 KiB (x4)
  L1 Instruction 32 KiB (x4)
  L2 Unified 256 KiB (x4)
  L3 Unified 8192 KiB (x1)
Load Average: 1.00, 1.00, 0.90
simdjson::dom implementation:      haswell
simdjson::ondemand implementation: fallback
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations best_branch_miss best_bytes_per_sec best_cache_miss best_cache_ref best_cycles best_cycles_per_byte best_docs_per_sec best_frequency best_instructions best_instructions_per_byte best_instructions_per_cycle best_items_per_sec branch_miss      bytes bytes_per_second cache_miss  cache_ref     cycles cycles_per_byte docs_per_sec  frequency instructions instructions_per_byte instructions_per_cycle      items items_per_second
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
partial_tweets<simdjson_dom>                  272041 ns       272041 ns         2573             3.8k           2.41146G               0        92.839k    966.874k              1.53104          3.81853k       3.69204G           2.9625M                    4.69111                       3.064           381.853k    3.97005k   631.515k       2.16197G/s    3.58531   92.8546k   973.662k         1.54179   3.67592k/s  3.5791G/s      2.9625M               4.69111                3.04264        100       367.592k/s [BEST: throughput=  2.41 GB/s doc_throughput=  3818 docs/s instructions=     2962504 cycles=      966874 branch_miss=    3800 cache_miss=       0 cache_ref=     92839 items=       100 avg_time=    263876 ns]
partial_tweets<simdjson_ondemand>            1129592 ns      1129593 ns          620           32.48k           567.436M               0        59.959k    4.10838M              6.50559           898.531        3.6915G          10.6861M                    16.9214                     2.60105           89.8531k    33.2203k   631.515k       533.165M/s   0.295161   59.8973k   4.13734M         6.55146    885.275/s 3.66269G/s     10.6861M               16.9214                2.58285        100       88.5275k/s [BEST: throughput=  0.57 GB/s doc_throughput=   898 docs/s instructions=    10686118 cycles=     4108379 branch_miss=   32480 cache_miss=       0 cache_ref=     59959 items=       100 avg_time=   1121420 ns]
partial_tweets<yyjson>                        701368 ns       701235 ns          998           9.963k           1.35971G             428        70.896k    1.53229M              2.42637          2.15308k       3.29915G          2.90851M                    4.60561                     1.89815           215.308k    7.63093k   631.515k       858.855M/s     1064.8   51.1015k   1.70241M         2.69575   1.42606k/s 2.42773G/s     2.90894M               4.60629                1.70872        100       142.606k/s [BEST: throughput=  1.36 GB/s doc_throughput=  2153 docs/s instructions=     2908511 cycles=     1532290 branch_miss=    9963 cache_miss=     428 cache_ref=     70896 items=       100 avg_time=    692296 ns]
Creating a source file spanning 44921 KB 
large_random<simdjson_dom>                  89147734 ns     89147130 ns            8         937.703k           518.657M        10.8184M       15.3844M     327.01M               7.1091           11.2755       3.68719G          983.113M                    21.3726                     3.00637            11.2755    933.626k   45.9988M       492.084M/s   10.9033M   15.3908M   328.739M         7.14669    11.2174/s  3.6876G/s     983.113M               21.3726                2.99056          1        11.2174/s [BEST: throughput=  0.52 GB/s doc_throughput=    11 docs/s instructions=   983112680 cycles=   327010018 branch_miss=  937703 cache_miss=10818368 cache_ref=  15384382 items=         1 avg_time=  89133816 ns]
large_random<simdjson_ondemand>            130065382 ns    130036045 ns            5         2.38632M           354.112M          5.646M       8.07556M    479.114M              10.4158           7.69829       3.68836G          1.28297G                    27.8915                      2.6778            7.69829    2.39318M   45.9988M       337.351M/s   5.71171M   8.07272M   479.618M         10.4267    7.69018/s 3.68834G/s     1.28297G               27.8915                2.67499          1        7.69018/s [BEST: throughput=  0.35 GB/s doc_throughput=     7 docs/s instructions=  1282973813 cycles=   479114053 branch_miss= 2386319 cache_miss= 5646002 cache_ref=   8075557 items=         1 avg_time= 130051885 ns]
large_random<simdjson_ondemand_unordered>  135550308 ns    135551137 ns            5         2.39363M           339.504M         5.7004M       8.07549M    499.819M              10.8659           7.38073       3.68903G          1.28697G                    27.9784                     2.57488            7.38073    2.38655M   45.9988M       323.626M/s    5.7127M    8.0759M    499.96M          10.869    7.37729/s 3.68835G/s     1.28697G               27.9784                2.57415          1        7.37729/s [BEST: throughput=  0.34 GB/s doc_throughput=     7 docs/s instructions=  1286973818 cycles=   499818905 branch_miss= 2393630 cache_miss= 5700404 cache_ref=   8075491 items=         1 avg_time= 135535989 ns]
large_random<yyjson>                       128194324 ns    128189636 ns            5         663.611k           359.062M        5.78908M       8.95791M    350.457M              7.61884            7.8059       2.73563G          944.149M                    20.5255                     2.69405             7.8059     663.15k   45.9988M       342.211M/s   5.79044M   8.96068M   350.588M         7.62169    7.80094/s 2.73492G/s     944.149M               20.5255                2.69304          1        7.80094/s [BEST: throughput=  0.36 GB/s doc_throughput=     7 docs/s instructions=   944149391 cycles=   350457145 branch_miss=  663611 cache_miss= 5789081 cache_ref=   8957906 items=         1 avg_time= 128174975 ns]
Creating a source file spanning 134087 KB 
kostya<simdjson_dom>                        84376440 ns     84374243 ns            8         494.195k           1.62996G        15.4728M       22.1358M    310.683M              2.26272           11.8711       3.68814G          945.501M                    6.88614                      3.0433            11.8711    494.553k   137.305M       1.51557G/s   15.5293M   22.1602M   311.091M         2.26569     11.852/s 3.68703G/s     945.501M               6.88614                3.03931          1         11.852/s [BEST: throughput=  1.63 GB/s doc_throughput=    11 docs/s instructions=   945501383 cycles=   310682754 branch_miss=  494195 cache_miss=15472762 cache_ref=  22135805 items=         1 avg_time=  84362052 ns]
kostya<simdjson_ondemand>                  301885160 ns    301870345 ns            2          3.3204M           455.112M        10.2403M        14.183M    1.11304G              8.10635           3.31461        3.6893G           2.8802G                    20.9767                     2.58769            3.31461    3.33149M   137.305M       433.776M/s   10.2893M   14.1832M   1.11365G         8.11078    3.31268/s 3.68917G/s      2.8802G               20.9767                2.58627          1        3.31268/s [BEST: throughput=  0.46 GB/s doc_throughput=     3 docs/s instructions=  2880202946 cycles=  1113041905 branch_miss= 3320397 cache_miss=10240345 cache_ref=  14183028 items=         1 avg_time= 301867868 ns]
------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations
------------------------------------------------------------------------------------
kostya<yyjson>                            ERROR OCCURRED: 'warmup document reading failed'
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations best_branch_miss best_bytes_per_sec best_cache_miss best_cache_ref best_cycles best_cycles_per_byte best_docs_per_sec best_frequency best_instructions best_instructions_per_byte best_instructions_per_cycle best_items_per_sec branch_miss      bytes bytes_per_second cache_miss  cache_ref     cycles cycles_per_byte docs_per_sec  frequency instructions instructions_per_byte instructions_per_cycle      items items_per_second
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
distinct_user_id<simdjson_dom>                268895 ns       268847 ns         2601           3.996k           2.46079G               0        94.469k    947.678k              1.50064          3.89665k       3.69277G          2.90343M                    4.59756                     3.06373           448.114k    4.15438k   631.515k       2.18766G/s    1.59785   94.4449k   953.561k         1.50996   3.71959k/s 3.54686G/s     2.90343M               4.59756                3.04483        115       427.753k/s [BEST: throughput=  2.46 GB/s doc_throughput=  3896 docs/s instructions=     2903429 cycles=      947678 branch_miss=    3996 cache_miss=       0 cache_ref=     94469 items=       115 avg_time=    258467 ns]
distinct_user_id<simdjson_ondemand>          1121540 ns      1121517 ns          625          32.388k           571.829M               0         57.93k    4.07704M              6.45597           905.487       3.69171G          10.3448M                    16.3809                     2.53733           104.131k    32.8995k   631.515k       537.004M/s     8.2416   57.9875k    4.1015M          6.4947    891.649/s  3.6571G/s     10.3448M               16.3809                2.52219        115        102.54k/s [BEST: throughput=  0.57 GB/s doc_throughput=   905 docs/s instructions=    10344780 cycles=     4077039 branch_miss=   32388 cache_miss=       0 cache_ref=     57930 items=       115 avg_time=   1111702 ns]
distinct_user_id<yyjson>                      694227 ns       694095 ns         1077            9.92k           1.38218G             236        70.328k    1.51875M              2.40494          2.18867k       3.32405G          2.87339M                       4.55                     1.89194           251.697k    7.74784k   631.515k        867.69M/s   1.12633k    49.992k   1.69347M          2.6816   1.44072k/s 2.43983G/s     2.87382M               4.55067                  1.697        115       165.683k/s [BEST: throughput=  1.38 GB/s doc_throughput=  2188 docs/s instructions=     2873392 cycles=     1518753 branch_miss=    9920 cache_miss=     236 cache_ref=     70328 items=       115 avg_time=    681385 ns]
find_tweet<simdjson_dom>                      255240 ns       255227 ns         2742           3.677k           2.57635G               0        83.739k    905.025k               1.4331          4.07963k       3.69217G          2.82239M                    4.46924                     3.11858           4.07963k    3.86313k   631.515k        2.3044G/s     4.8636   83.6952k   911.455k         1.44328   3.91808k/s 3.57115G/s     2.82239M               4.46924                3.09658          1       3.91808k/s [BEST: throughput=  2.58 GB/s doc_throughput=  4079 docs/s instructions=     2822390 cycles=      905025 branch_miss=    3677 cache_miss=       0 cache_ref=     83739 items=         1 avg_time=    247033 ns]
find_tweet<simdjson_ondemand>                1054654 ns      1054661 ns          664          31.602k           608.006M               0        30.871k    3.83432M              6.07163           962.774       3.69159G          9.73047M                    15.4081                     2.53773            962.774     32.196k   631.515k       571.046M/s    0.26506   30.9678k    3.8614M          6.1145    948.172/s 3.66127G/s     9.73047M               15.4081                2.51994          1        948.172/s [BEST: throughput=  0.61 GB/s doc_throughput=   962 docs/s instructions=     9730471 cycles=     3834325 branch_miss=   31602 cache_miss=       0 cache_ref=     30871 items=         1 avg_time=   1046593 ns]
find_tweet<yyjson>                            680619 ns       680475 ns         1034           9.646k           1.41606G             148        61.543k    1.48271M              2.34786          2.24232k       3.32471G          2.82427M                    4.47221                      1.9048           2.24232k    7.43554k   631.515k       885.057M/s   1.18811k    41.268k   1.65763M         2.62485   1.46956k/s 2.43599G/s      2.8247M                4.4729                1.70406          1       1.46956k/s [BEST: throughput=  1.42 GB/s doc_throughput=  2242 docs/s instructions=     2824268 cycles=     1482710 branch_miss=    9646 cache_miss=     148 cache_ref=     61543 items=         1 avg_time=    671579 ns]
