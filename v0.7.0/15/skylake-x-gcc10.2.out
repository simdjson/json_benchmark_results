run_benchmark: v0.8.0~23 /home/jkeiser/simdjson_benchmark_results/v0.7.0/15/skylake-x-gcc10.2.json -DCMAKE_BUILD_TYPE=Release
git reset --hard v0.8.0~23
HEAD is now at 22846f75 Merge pull request #1363 from simdjson/jkeiser/ondemand-benchmarks
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_RULE_MESSAGES:BOOL=OFF -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON ..
-- The simdjson repository appears to be standalone.
-- By default, we attempt to build everything.
-- Building a dynamic library.
-- Library output directory: /home/jkeiser/simdjson_benchmark_results/simdjson/build
-- Importing google_benchmarks (google/benchmark@8982e1e)
-- Failed to find LLVM FileCheck
-- git Version: v0.2.1-22846f75
-- Version: 0.2.1
-- Performing Test HAVE_STD_REGEX -- success
-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile
-- Performing Test HAVE_POSIX_REGEX -- success
-- Performing Test HAVE_STEADY_CLOCK -- success
-- Importing cjson (DaveGamble/cJSON@c69134d)
-- Importing fastjson (mikeando/fastjson@485f994)
-- Importing gason (vivkin/gason@7aee524)
-- Importing jsmn (zserge/jsmn@18e9fe4)
-- Importing json (nlohmann/json@v3.9.1)
-- Importing json11 (dropbox/json11@ec4e452)
-- Importing rapidjson (Tencent/rapidjson@b32cd94)
-- Importing sajson (chadaustin/sajson@2dcfd35)
-- Importing ujson4c (esnme/ujson4c@e14f3fd)
-- Importing yyjson (ibireme/yyjson@aa33ec5)
-- Importing cxxopts (jarro2783/cxxopts@794c975)
-- cxxopts version 2.2.0
-- We have cxxopts as a dependency and we are buiding the tools (e.g., json2json).
-- Git is available and it is recent. We are enabling checkperf targets.
-- Configuring done
-- Generating done
-- Build files have been written to: /home/jkeiser/simdjson_benchmark_results/simdjson/build
make bench_ondemand
/usr/bin/cmake -S/home/jkeiser/simdjson_benchmark_results/simdjson -B/home/jkeiser/simdjson_benchmark_results/simdjson/build --check-build-system CMakeFiles/Makefile.cmake 0
make -f CMakeFiles/Makefile2 bench_ondemand
/usr/bin/cmake -S/home/jkeiser/simdjson_benchmark_results/simdjson -B/home/jkeiser/simdjson_benchmark_results/simdjson/build --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/jkeiser/simdjson_benchmark_results/simdjson/build/CMakeFiles 11
make -f CMakeFiles/Makefile2 benchmark/CMakeFiles/bench_ondemand.dir/all
make -f _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build.make _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/google_benchmarks/src /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/_deps/google_benchmarks/src /home/jkeiser/simdjson_benchmark_results/simdjson/build/_deps/google_benchmarks/src/CMakeFiles/benchmark.dir/DependInfo.cmake --color=
make -f _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build.make _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build
make[3]: Nothing to be done for '_deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build'.
[ 72%] Built target benchmark
make -f jsonexamples/generated/CMakeFiles/generated-data.dir/build.make jsonexamples/generated/CMakeFiles/generated-data.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/jsonexamples/generated /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/generated /home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/generated/CMakeFiles/generated-data.dir/DependInfo.cmake --color=
make -f jsonexamples/generated/CMakeFiles/generated-data.dir/build.make jsonexamples/generated/CMakeFiles/generated-data.dir/build
make[3]: Nothing to be done for 'jsonexamples/generated/CMakeFiles/generated-data.dir/build'.
[ 72%] Built target generated-data
make -f src/CMakeFiles/simdjson.dir/build.make src/CMakeFiles/simdjson.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/src /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/src /home/jkeiser/simdjson_benchmark_results/simdjson/build/src/CMakeFiles/simdjson.dir/DependInfo.cmake --color=
make -f src/CMakeFiles/simdjson.dir/build.make src/CMakeFiles/simdjson.dir/build
make[3]: Nothing to be done for 'src/CMakeFiles/simdjson.dir/build'.
[ 81%] Built target simdjson
make -f dependencies/CMakeFiles/yyjson.dir/build.make dependencies/CMakeFiles/yyjson.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/dependencies /home/jkeiser/simdjson_benchmark_results/simdjson/build/dependencies/CMakeFiles/yyjson.dir/DependInfo.cmake --color=
make -f dependencies/CMakeFiles/yyjson.dir/build.make dependencies/CMakeFiles/yyjson.dir/build
make[3]: Nothing to be done for 'dependencies/CMakeFiles/yyjson.dir/build'.
[ 90%] Built target yyjson
make -f benchmark/CMakeFiles/bench_ondemand.dir/build.make benchmark/CMakeFiles/bench_ondemand.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/benchmark /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark/CMakeFiles/bench_ondemand.dir/DependInfo.cmake --color=
Scanning dependencies of target bench_ondemand
make -f benchmark/CMakeFiles/bench_ondemand.dir/build.make benchmark/CMakeFiles/bench_ondemand.dir/build
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark && /usr/bin/g++-10  -DSIMDJSON_BENCHMARK_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/\" -DSIMDJSON_COMPETITION_YYJSON -DSIMDJSON_MINEFIELD_TEST_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/jsonchecker/minefield/\" -DSIMDJSON_TEST_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/jsonchecker/\" -DSIMDJSON_THREADS_ENABLED=1 -DSIMDJSON_USING_LIBRARY=1 -I/home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/. -I/home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/linux -I/home/jkeiser/simdjson_benchmark_results/simdjson/include -I/home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/google_benchmarks/src/../include -isystem /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/yyjson/src  -O3 -DNDEBUG   -pthread -std=c++17 -o CMakeFiles/bench_ondemand.dir/bench_ondemand.cpp.o -c /home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/bench_ondemand.cpp
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark && /usr/bin/cmake -E cmake_link_script CMakeFiles/bench_ondemand.dir/link.txt --verbose=1
/usr/bin/g++-10  -O3 -DNDEBUG   CMakeFiles/bench_ondemand.dir/bench_ondemand.cpp.o  -o bench_ondemand  -Wl,-rpath,/home/jkeiser/simdjson_benchmark_results/simdjson/build ../libsimdjson.so.6.0.0 ../_deps/google_benchmarks/src/libbenchmark.a ../dependencies/libyyjson.a -pthread /usr/lib/x86_64-linux-gnu/librt.so 
[100%] Built target bench_ondemand
/usr/bin/cmake -E cmake_progress_start /home/jkeiser/simdjson_benchmark_results/simdjson/build/CMakeFiles 0
benchmark/bench_ondemand --benchmark_counters_tabular=true --benchmark_out=/home/jkeiser/simdjson_benchmark_results/v0.7.0/15/skylake-x-gcc10.2.json --benchmark_out_format=json
2021-01-24 23:31:35
Running benchmark/bench_ondemand
Run on (4 X 3200 MHz CPU s)
CPU Caches:
  L1 Data 32 KiB (x4)
  L1 Instruction 32 KiB (x4)
  L2 Unified 1024 KiB (x4)
  L3 Unified 8448 KiB (x1)
Load Average: 0.99, 0.99, 1.00
***WARNING*** CPU scaling is enabled, the benchmark real time measurements may be noisy and will incur extra overhead.
simdjson::dom implementation:      haswell
simdjson::ondemand implementation: fallback
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations best_branch_miss best_bytes_per_sec best_cache_miss best_cache_ref best_cycles best_cycles_per_byte best_docs_per_sec best_frequency best_instructions best_instructions_per_byte best_instructions_per_cycle best_items_per_sec branch_miss      bytes bytes_per_second cache_miss  cache_ref     cycles cycles_per_byte docs_per_sec  frequency instructions instructions_per_byte instructions_per_cycle      items items_per_second
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
partial_tweets<simdjson_dom>                  318988 ns       318982 ns         2185           3.887k           2.10068G               0        29.601k    960.045k              1.52023          3.32641k       3.19351G          2.96251M                    4.69112                     3.08581           332.641k    4.08513k   631.515k       1.84382G/s   0.107551   29.9327k   966.664k         1.53071   3.13498k/s 3.03047G/s     2.96251M               4.69112                3.06468        100       313.498k/s [BEST: throughput=  2.10 GB/s doc_throughput=  3326 docs/s instructions=     2962512 cycles=      960045 branch_miss=    3887 cache_miss=       0 cache_ref=     29601 items=       100 avg_time=    302959 ns]
partial_tweets<simdjson_ondemand>            1307079 ns      1307056 ns          535          32.319k           492.075M               0         6.053k    4.09744M              6.48828           779.198       3.19272G          10.6861M                    16.9214                       2.608           77.9198k    32.7468k   631.515k       460.776M/s   0.386916   6.22341k    4.1233M         6.52922    765.078/s 3.15465G/s     10.6861M               16.9214                2.59164        100       76.5078k/s [BEST: throughput=  0.49 GB/s doc_throughput=   779 docs/s instructions=    10686126 cycles=     4097444 branch_miss=   32319 cache_miss=       0 cache_ref=      6053 items=       100 avg_time=   1292268 ns]
partial_tweets<yyjson>                        858673 ns       858667 ns          814          10.107k           1075.85M             285          26.5k    1.63081M              2.58238          1.70361k       2.77826G          2.90852M                    4.60562                     1.78348           170.361k    7.60194k   631.515k       701.389M/s      627.7   25.7383k    1.7308M         2.74071    1.1646k/s 2.01568G/s     2.90895M               4.60631                 1.6807        100        116.46k/s [BEST: throughput=  1.08 GB/s doc_throughput=  1703 docs/s instructions=     2908520 cycles=     1630810 branch_miss=   10107 cache_miss=     285 cache_ref=     26500 items=       100 avg_time=    840757 ns]
Creating a source file spanning 44921 KB 
large_random<simdjson_dom>                  99395225 ns     99392568 ns            7         876.848k           464.448M         6.8472M        6.8965M     315.75M              6.86432            10.097       3.18812G          983.113M                    21.3726                     3.11358             10.097    878.201k   45.9988M       441.359M/s   6.79777M    6.8962M    316.83M         6.88778    10.0611/s 3.18766G/s     983.113M               21.3726                3.10297          1        10.0611/s [BEST: throughput=  0.46 GB/s doc_throughput=    10 docs/s instructions=   983112690 cycles=   315750196 branch_miss=  876848 cache_miss= 6847200 cache_ref=   6896504 items=         1 avg_time=  99367547 ns]
large_random<simdjson_ondemand>            147601130 ns    147595823 ns            5         2.37742M           311.954M         3.4659M       3.57377M    470.345M              10.2252           6.78178       3.18978G          1.28297G                    27.8915                     2.72773            6.78178    2.38601M   45.9988M       297.216M/s   3.51052M   3.57384M   470.686M         10.2326    6.77526/s 3.18902G/s     1.28297G               27.8915                2.72575          1        6.77526/s [BEST: throughput=  0.31 GB/s doc_throughput=     6 docs/s instructions=  1282973823 cycles=   470344923 branch_miss= 2377419 cache_miss= 3465898 cache_ref=   3573766 items=         1 avg_time= 147572792 ns]
large_random<simdjson_ondemand_unordered>  153502200 ns    153500958 ns            5         2.35978M           299.926M         3.5572M        3.5731M     489.12M              10.6333           6.52031       3.18921G          1.28697G                    27.9784                     2.63121            6.52031    2.37028M   45.9988M       285.782M/s   3.50719M   3.57312M   489.534M         10.6423    6.51462/s 3.18912G/s     1.28697G               27.9784                2.62898          1        6.51462/s [BEST: throughput=  0.30 GB/s doc_throughput=     6 docs/s instructions=  1286973831 cycles=   489119544 branch_miss= 2359777 cache_miss= 3557201 cache_ref=   3573105 items=         1 avg_time= 153473018 ns]
large_random<yyjson>                       155763225 ns    155757875 ns            4         661.825k           295.687M        4.20765M       5.28835M    358.223M              7.78767           6.42814       2.30271G          944.149M                    20.5255                     2.63564            6.42814     666.22k   45.9988M       281.641M/s   4.20892M   5.30944M   358.833M         7.80092    6.42022/s 2.30379G/s     944.149M               20.5255                2.63117          1        6.42022/s [BEST: throughput=  0.30 GB/s doc_throughput=     6 docs/s instructions=   944149405 cycles=   358223332 branch_miss=  661825 cache_miss= 4207651 cache_ref=   5288352 items=         1 avg_time= 155727579 ns]
Creating a source file spanning 134087 KB 
kostya<simdjson_dom>                        95562320 ns     95561547 ns            7         463.183k           1.43905G        10.1319M       10.3157M    304.227M               2.2157           10.4807       3.18851G          945.501M                    6.88614                     3.10788            10.4807    462.996k   137.305M       1.33815G/s   10.2014M   10.3156M   304.599M         2.21841    10.4645/s 3.18747G/s     945.501M               6.88614                3.10408          1        10.4645/s [BEST: throughput=  1.44 GB/s doc_throughput=    10 docs/s instructions=   945501392 cycles=   304227142 branch_miss=  463183 cache_miss=10131872 cache_ref=  10315704 items=         1 avg_time=  95533033 ns]
kostya<simdjson_ondemand>                  344491930 ns    344483479 ns            2         3.32852M           398.758M        6.45593M       6.47181M    1098.33M              7.99921           2.90417       3.18975G           2.8802G                    20.9767                     2.62234            2.90417    3.32856M   137.305M       380.118M/s   6.44043M   6.47205M   1098.75M         8.00226     2.9029/s 3.18956G/s      2.8802G               20.9767                2.62135          1         2.9029/s [BEST: throughput=  0.40 GB/s doc_throughput=     2 docs/s instructions=  2880202963 cycles=  1098332115 branch_miss= 3328518 cache_miss= 6455931 cache_ref=   6471814 items=         1 avg_time= 344456132 ns]
------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations
------------------------------------------------------------------------------------
kostya<yyjson>                            ERROR OCCURRED: 'warmup document reading failed'
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations best_branch_miss best_bytes_per_sec best_cache_miss best_cache_ref best_cycles best_cycles_per_byte best_docs_per_sec best_frequency best_instructions best_instructions_per_byte best_instructions_per_cycle best_items_per_sec branch_miss      bytes bytes_per_second cache_miss  cache_ref     cycles cycles_per_byte docs_per_sec  frequency instructions instructions_per_byte instructions_per_cycle      items items_per_second
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
distinct_user_id<simdjson_dom>                318447 ns       318441 ns         2195           4.044k           2.14041G               0        31.517k    942.358k              1.49222          3.38932k       3.19396G          2.90344M                    4.59757                     3.08103           389.772k    4.16866k   631.515k       1.84695G/s   0.365376   31.7142k   948.368k         1.50174    3.1403k/s 2.97816G/s     2.90344M               4.59757                3.06151        115       361.134k/s [BEST: throughput=  2.14 GB/s doc_throughput=  3389 docs/s instructions=     2903437 cycles=      942358 branch_miss=    4044 cache_miss=       0 cache_ref=     31517 items=       115 avg_time=    297221 ns]
distinct_user_id<simdjson_ondemand>          1298398 ns      1298361 ns          538          31.775k           496.639M               0         6.376k    4.05972M              6.42854           786.425       3.19266G          10.3448M                    16.3809                     2.54815           90.4389k    32.1967k   631.515k       463.861M/s   0.070632   6.57947k   4.08206M         6.46391    770.202/s 3.14401G/s     10.3448M               16.3809                2.53421        115       88.5732k/s [BEST: throughput=  0.50 GB/s doc_throughput=   786 docs/s instructions=    10344788 cycles=     4059717 branch_miss=   31775 cache_miss=       0 cache_ref=      6376 items=       115 avg_time=   1279403 ns]
distinct_user_id<yyjson>                      862553 ns       862546 ns          867           9.795k           1.12369G             309        25.208k    1.59982M               2.5333          1.77935k       2.84663G           2.8734M                    4.55001                     1.79608           204.625k    7.76124k   631.515k       698.235M/s    497.414   25.5167k   1.72531M         2.73202   1.15936k/s 2.00025G/s     2.87383M               4.55069                1.66569        115       133.326k/s [BEST: throughput=  1.12 GB/s doc_throughput=  1779 docs/s instructions=     2873399 cycles=     1599816 branch_miss=    9795 cache_miss=     309 cache_ref=     25208 items=       115 avg_time=    837899 ns]
find_tweet<simdjson_dom>                      302467 ns       302460 ns         2314           3.788k            2.2477G               5        26.741k    897.245k              1.42078          3.55923k        3.1935G           2.8224M                    4.46925                     3.14563           3.55923k    3.94152k   631.515k       1.94453G/s    5.41184   26.8666k   904.341k         1.43202   3.30622k/s 2.98995G/s      2.8224M               4.46925                3.12094          1       3.30622k/s [BEST: throughput=  2.25 GB/s doc_throughput=  3559 docs/s instructions=     2822398 cycles=      897245 branch_miss=    3788 cache_miss=       5 cache_ref=     26741 items=         1 avg_time=    283423 ns]
find_tweet<simdjson_ondemand>                1221595 ns      1221586 ns          573           30.83k           527.921M               0         3.548k    3.81197M              6.03623           835.959       3.18665G          9.73048M                    15.4082                     2.55261            835.959    31.5399k   631.515k       493.015M/s   0.146597   3.62052k   3.84326M         6.08577    818.608/s 3.14612G/s     9.73048M               15.4082                2.53183          1        818.608/s [BEST: throughput=  0.53 GB/s doc_throughput=   835 docs/s instructions=     9730480 cycles=     3811970 branch_miss=   30830 cache_miss=       0 cache_ref=      3548 items=         1 avg_time=   1204467 ns]
find_tweet<yyjson>                            848399 ns       848370 ns          830           9.619k           1.14043G             425        23.881k    1.56798M              2.48289          1.80587k       2.83157G          2.82428M                    4.47222                     1.80122           1.80587k    7.48578k   631.515k       709.902M/s    468.787   24.5829k   1.69247M         2.68002   1.17873k/s 1.99497G/s     2.82471M               4.47291                1.66898          1       1.17873k/s [BEST: throughput=  1.14 GB/s doc_throughput=  1805 docs/s instructions=     2824276 cycles=     1567983 branch_miss=    9619 cache_miss=     425 cache_ref=     23881 items=         1 avg_time=    827440 ns]
