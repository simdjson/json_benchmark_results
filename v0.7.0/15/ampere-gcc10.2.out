run_benchmark: v0.8.0~23 /home/jkeiser/simdjson_benchmark_results/v0.7.0/15/ampere-gcc10.2.json -DCMAKE_BUILD_TYPE=Release
git reset --hard v0.8.0~23
HEAD is now at 22846f75 Merge pull request #1363 from simdjson/jkeiser/ondemand-benchmarks
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_RULE_MESSAGES:BOOL=OFF -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON ..
-- The simdjson repository appears to be standalone.
-- By default, we attempt to build everything.
-- Building a dynamic library.
-- Library output directory: /home/jkeiser/simdjson_benchmark_results/simdjson/build
-- Importing google_benchmarks (google/benchmark@8982e1e)
-- git Version: v0.2.1-22846f75
-- Version: 0.2.1
-- Performing Test HAVE_STD_REGEX -- success
-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile
-- Performing Test HAVE_POSIX_REGEX -- success
-- Performing Test HAVE_STEADY_CLOCK -- success
-- Importing cjson (DaveGamble/cJSON@c69134d)
-- Importing fastjson (mikeando/fastjson@485f994)
-- Importing gason (vivkin/gason@7aee524)
-- Importing jsmn (zserge/jsmn@18e9fe4)
-- Importing json (nlohmann/json@v3.9.1)
-- Importing json11 (dropbox/json11@ec4e452)
-- Importing rapidjson (Tencent/rapidjson@b32cd94)
-- Importing sajson (chadaustin/sajson@2dcfd35)
-- Importing ujson4c (esnme/ujson4c@e14f3fd)
-- Importing yyjson (ibireme/yyjson@aa33ec5)
-- Importing cxxopts (jarro2783/cxxopts@794c975)
-- cxxopts version 2.2.0
-- We have cxxopts as a dependency and we are buiding the tools (e.g., json2json).
-- Git is available and it is recent. We are enabling checkperf targets.
-- Configuring done
-- Generating done
-- Build files have been written to: /home/jkeiser/simdjson_benchmark_results/simdjson/build
make bench_ondemand
/usr/bin/cmake -S/home/jkeiser/simdjson_benchmark_results/simdjson -B/home/jkeiser/simdjson_benchmark_results/simdjson/build --check-build-system CMakeFiles/Makefile.cmake 0
make -f CMakeFiles/Makefile2 bench_ondemand
/usr/bin/cmake -S/home/jkeiser/simdjson_benchmark_results/simdjson -B/home/jkeiser/simdjson_benchmark_results/simdjson/build --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/jkeiser/simdjson_benchmark_results/simdjson/build/CMakeFiles 11
make -f CMakeFiles/Makefile2 benchmark/CMakeFiles/bench_ondemand.dir/all
make -f _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build.make _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/google_benchmarks/src /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/_deps/google_benchmarks/src /home/jkeiser/simdjson_benchmark_results/simdjson/build/_deps/google_benchmarks/src/CMakeFiles/benchmark.dir/DependInfo.cmake --color=
make -f _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build.make _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build
make[3]: Nothing to be done for '_deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build'.
[ 72%] Built target benchmark
make -f jsonexamples/generated/CMakeFiles/generated-data.dir/build.make jsonexamples/generated/CMakeFiles/generated-data.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/jsonexamples/generated /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/generated /home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/generated/CMakeFiles/generated-data.dir/DependInfo.cmake --color=
make -f jsonexamples/generated/CMakeFiles/generated-data.dir/build.make jsonexamples/generated/CMakeFiles/generated-data.dir/build
make[3]: Nothing to be done for 'jsonexamples/generated/CMakeFiles/generated-data.dir/build'.
[ 72%] Built target generated-data
make -f src/CMakeFiles/simdjson.dir/build.make src/CMakeFiles/simdjson.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/src /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/src /home/jkeiser/simdjson_benchmark_results/simdjson/build/src/CMakeFiles/simdjson.dir/DependInfo.cmake --color=
make -f src/CMakeFiles/simdjson.dir/build.make src/CMakeFiles/simdjson.dir/build
make[3]: Nothing to be done for 'src/CMakeFiles/simdjson.dir/build'.
[ 81%] Built target simdjson
make -f dependencies/CMakeFiles/yyjson.dir/build.make dependencies/CMakeFiles/yyjson.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/dependencies /home/jkeiser/simdjson_benchmark_results/simdjson/build/dependencies/CMakeFiles/yyjson.dir/DependInfo.cmake --color=
make -f dependencies/CMakeFiles/yyjson.dir/build.make dependencies/CMakeFiles/yyjson.dir/build
make[3]: Nothing to be done for 'dependencies/CMakeFiles/yyjson.dir/build'.
[ 90%] Built target yyjson
make -f benchmark/CMakeFiles/bench_ondemand.dir/build.make benchmark/CMakeFiles/bench_ondemand.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/benchmark /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark/CMakeFiles/bench_ondemand.dir/DependInfo.cmake --color=
Scanning dependencies of target bench_ondemand
make -f benchmark/CMakeFiles/bench_ondemand.dir/build.make benchmark/CMakeFiles/bench_ondemand.dir/build
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark && /usr/bin/g++-10  -DSIMDJSON_BENCHMARK_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/\" -DSIMDJSON_COMPETITION_YYJSON -DSIMDJSON_MINEFIELD_TEST_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/jsonchecker/minefield/\" -DSIMDJSON_TEST_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/jsonchecker/\" -DSIMDJSON_THREADS_ENABLED=1 -DSIMDJSON_USING_LIBRARY=1 -I/home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/. -I/home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/linux -I/home/jkeiser/simdjson_benchmark_results/simdjson/include -I/home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/google_benchmarks/src/../include -isystem /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/yyjson/src  -O3 -DNDEBUG   -pthread -std=c++17 -o CMakeFiles/bench_ondemand.dir/bench_ondemand.cpp.o -c /home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/bench_ondemand.cpp
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark && /usr/bin/cmake -E cmake_link_script CMakeFiles/bench_ondemand.dir/link.txt --verbose=1
/usr/bin/g++-10  -O3 -DNDEBUG   CMakeFiles/bench_ondemand.dir/bench_ondemand.cpp.o  -o bench_ondemand  -Wl,-rpath,/home/jkeiser/simdjson_benchmark_results/simdjson/build ../libsimdjson.so.6.0.0 ../_deps/google_benchmarks/src/libbenchmark.a ../dependencies/libyyjson.a -pthread /usr/lib/aarch64-linux-gnu/librt.so 
[100%] Built target bench_ondemand
/usr/bin/cmake -E cmake_progress_start /home/jkeiser/simdjson_benchmark_results/simdjson/build/CMakeFiles 0
benchmark/bench_ondemand --benchmark_counters_tabular=true --benchmark_out=/home/jkeiser/simdjson_benchmark_results/v0.7.0/15/ampere-gcc10.2.json --benchmark_out_format=json
2021-01-25 01:12:31
Running benchmark/bench_ondemand
Run on (32 X 3300 MHz CPU s)
CPU Caches:
  L1 Data 32 KiB (x32)
  L1 Instruction 32 KiB (x32)
  L2 Unified 256 KiB (x16)
Load Average: 1.05, 1.01, 1.00
simdjson::dom implementation:      arm64
simdjson::ondemand implementation: arm64
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations best_branch_miss best_bytes_per_sec best_cache_miss best_cache_ref best_cycles best_cycles_per_byte best_docs_per_sec best_frequency best_instructions best_instructions_per_byte best_instructions_per_cycle best_items_per_sec branch_miss      bytes bytes_per_second cache_miss  cache_ref     cycles cycles_per_byte docs_per_sec  frequency instructions instructions_per_byte instructions_per_cycle      items items_per_second
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
partial_tweets<simdjson_dom>                 1605666 ns      1605657 ns          437          17.414k           400.769M         25.915k       906.444k    5.04406M              7.98724           634.614       3.20104G          3.92138M                    6.20949                    0.777425           63.4614k     17.605k   631.515k       375.086M/s   25.9216k   904.381k   5.05907M           8.011    622.798/s 3.15078G/s     3.92139M               6.20949               0.775121        100       62.2798k/s [BEST: throughput=  0.40 GB/s doc_throughput=   634 docs/s instructions=     3921384 cycles=     5044065 branch_miss=   17414 cache_miss=   25915 cache_ref=    906444 items=       100 avg_time=   1582179 ns]
partial_tweets<simdjson_ondemand>            1091520 ns      1091532 ns          641           6.839k           592.843M         22.759k       403.507k    3.40997M              5.39966           938.763       3.20115G          2.75991M                    4.37031                    0.809367           93.8763k    6.98607k   631.515k       551.756M/s   22.7592k    403.68k   3.41379M         5.40572    916.144/s 3.12753G/s     2.75992M               4.37031               0.808461        100       91.6144k/s [BEST: throughput=  0.59 GB/s doc_throughput=   938 docs/s instructions=     2759914 cycles=     3409966 branch_miss=    6839 cache_miss=   22759 cache_ref=    403507 items=       100 avg_time=   1067450 ns]
partial_tweets<yyjson>                       1256705 ns      1256632 ns          559          46.508k           563.133M         24.276k       1.48647M     3.4877M              5.52275           891.717       3.11004G          3.54858M                    5.61916                     1.01746           89.1717k    46.6956k   631.515k       479.265M/s   24.3601k   1.48838M   3.71654M         5.88512    795.778/s 2.95754G/s     3.54889M               5.61964               0.954891        100       79.5778k/s [BEST: throughput=  0.56 GB/s doc_throughput=   891 docs/s instructions=     3548582 cycles=     3487702 branch_miss=   46508 cache_miss=   24276 cache_ref=   1486469 items=       100 avg_time=   1231010 ns]
Creating a source file spanning 44921 KB 
large_random<simdjson_dom>                 310988191 ns    310982480 ns            2         1.91005M           147.992M        3.98069M        246.73M    993.662M              21.6019           3.21731       3.19692G          1.10647G                    24.0544                     1.11353            3.21731    1.90937M   45.9988M       141.062M/s   3.98067M   246.725M   993.994M         21.6091    3.21562/s  3.1963G/s     1.10647G               24.0544                1.11316          1        3.21562/s [BEST: throughput=  0.15 GB/s doc_throughput=     3 docs/s instructions=  1106472996 cycles=   993661961 branch_miss= 1910048 cache_miss= 3980693 cache_ref= 246729859 items=         1 avg_time= 310932125 ns]
large_random<simdjson_ondemand>            183739715 ns    183741623 ns            4         1.19182M           250.427M        2.31744M       134.452M    587.236M              12.7663           5.44422       3.19704G          689.959M                    14.9995                     1.17493            5.44422    1.19226M   45.9988M       238.747M/s   2.31741M   134.452M   587.229M         12.7662    5.44242/s 3.19595G/s     689.959M               14.9995                1.17494          1        5.44242/s [BEST: throughput=  0.25 GB/s doc_throughput=     5 docs/s instructions=   689958643 cycles=   587236071 branch_miss= 1191817 cache_miss= 2317443 cache_ref= 134451826 items=         1 avg_time= 183686838 ns]
large_random<simdjson_ondemand_unordered>  185103889 ns    185105801 ns            4         1.20575M           248.592M        2.31714M        138.43M    591.608M              12.8614           5.40432       3.19724G          693.959M                    15.0865                     1.17301            5.40432    1.20551M   45.9988M       236.988M/s   2.31717M   138.431M   591.619M         12.8616    5.40232/s 3.19611G/s     693.959M               15.0865                1.17298          1        5.40232/s [BEST: throughput=  0.25 GB/s doc_throughput=     5 docs/s instructions=   693958643 cycles=   591607573 branch_miss= 1205747 cache_miss= 2317143 cache_ref= 138430334 items=         1 avg_time= 185053111 ns]
large_random<yyjson>                       203619733 ns    203609756 ns            3         1.61993M            226.09M        4.91301M        235.19M    625.747M              13.6036           4.91512       3.07562G          908.191M                    19.7438                     1.45137            4.91512    1.61974M   45.9988M       215.451M/s   4.91308M   235.201M   625.951M          13.608    4.91136/s 3.07427G/s     908.191M               19.7438                 1.4509          1        4.91136/s [BEST: throughput=  0.23 GB/s doc_throughput=     4 docs/s instructions=   908191350 cycles=   625746797 branch_miss= 1619927 cache_miss= 4913008 cache_ref= 235190148 items=         1 avg_time= 203562096 ns]
Creating a source file spanning 134087 KB 
kostya<simdjson_dom>                       380660145 ns    380656225 ns            2          1097.4k           360.824M        6.94483M       246.875M    1.21653G              8.86005            2.6279       3.19692G          1.14604G                    8.34671                    0.942061             2.6279    1097.37k   137.305M       343.996M/s   6.94484M   246.876M   1.21664G         8.86085    2.62704/s 3.19616G/s     1.14604G               8.34671               0.941975          1        2.62704/s [BEST: throughput=  0.36 GB/s doc_throughput=     2 docs/s instructions=  1146044351 cycles=  1216529391 branch_miss= 1097399 cache_miss= 6944834 cache_ref= 246875164 items=         1 avg_time= 380597179 ns]
kostya<simdjson_ondemand>                  257969227 ns    257971846 ns            3         1.21177M           532.579M        5.28116M       137.079M    824.189M              6.00261            3.8788       3.19686G          796.072M                    5.79784                    0.965885             3.8788    1.22312M   137.305M       507.591M/s   5.28119M   137.114M   824.524M         6.00505    3.87639/s 3.19618G/s     796.072M               5.79784               0.965493          1        3.87639/s [BEST: throughput=  0.53 GB/s doc_throughput=     3 docs/s instructions=   796071979 cycles=   824188770 branch_miss= 1211769 cache_miss= 5281160 cache_ref= 137079093 items=         1 avg_time= 257908353 ns]
------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations
------------------------------------------------------------------------------------
kostya<yyjson>                            ERROR OCCURRED: 'warmup document reading failed'
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations best_branch_miss best_bytes_per_sec best_cache_miss best_cache_ref best_cycles best_cycles_per_byte best_docs_per_sec best_frequency best_instructions best_instructions_per_byte best_instructions_per_cycle best_items_per_sec branch_miss      bytes bytes_per_second cache_miss  cache_ref     cycles cycles_per_byte docs_per_sec  frequency instructions instructions_per_byte instructions_per_cycle      items items_per_second
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
distinct_user_id<simdjson_dom>               1604734 ns      1604751 ns          437          17.079k           404.321M         26.496k       891.356k    4.99923M              7.91626            640.24       3.20071G          3.85168M                    6.09911                    0.770453           73.6276k    17.2719k   631.515k       375.298M/s   26.4926k   885.637k   5.03022M         7.96533    623.149/s 3.13458G/s     3.85168M               6.09911               0.765707        115       71.6622k/s [BEST: throughput=  0.40 GB/s doc_throughput=   640 docs/s instructions=     3851677 cycles=     4999235 branch_miss=   17079 cache_miss=   26496 cache_ref=    891356 items=       115 avg_time=   1573122 ns]
distinct_user_id<simdjson_ondemand>          1076652 ns      1076663 ns          650           6.317k           605.745M         22.369k       378.571k    3.33738M              5.28472           959.193       3.20119G          2.69454M                    4.26679                    0.807382           110.307k    6.60666k   631.515k       559.376M/s    22.369k   379.003k   3.34309M         5.29376    928.796/s 3.10505G/s     2.69454M               4.26678               0.806002        115       106.811k/s [BEST: throughput=  0.61 GB/s doc_throughput=   959 docs/s instructions=     2694539 cycles=     3337378 branch_miss=    6317 cache_miss=   22369 cache_ref=    378571 items=       115 avg_time=   1045348 ns]
distinct_user_id<yyjson>                     1242894 ns      1242886 ns          567          46.882k           562.408M         24.154k       1.47314M    3.52477M              5.58145            890.57       3.13905G          3.51319M                    5.56312                    0.996716           102.416k    46.2873k   631.515k       484.565M/s   24.1975k    1.4729M   3.65006M         5.77985    804.579/s 2.93676G/s     3.51335M               5.56336               0.962544        115       92.5266k/s [BEST: throughput=  0.56 GB/s doc_throughput=   890 docs/s instructions=     3513192 cycles=     3524769 branch_miss=   46882 cache_miss=   24154 cache_ref=   1473136 items=       115 avg_time=   1209409 ns]
find_tweet<simdjson_dom>                     1549936 ns      1549930 ns          449          16.877k           416.327M         23.457k       876.077k    4.85512M              7.68805           659.252       3.20075G          3.76236M                    5.95767                    0.774927            659.252     17.076k   631.515k       388.572M/s   23.4567k   876.271k    4.8613M         7.69784    645.191/s 3.13646G/s     3.76236M               5.95767               0.773941          1        645.191/s [BEST: throughput=  0.42 GB/s doc_throughput=   659 docs/s instructions=     3762360 cycles=     4855118 branch_miss=   16877 cache_miss=   23457 cache_ref=    876077 items=         1 avg_time=   1520360 ns]
find_tweet<simdjson_ondemand>                 943820 ns       943800 ns          742           4.013k           691.717M          11.55k       193.924k     2.9228M              4.62824           1095.33       3.20144G          2.05902M                    3.26045                    0.704467            1095.33    4.09524k   631.515k       638.122M/s   11.5507k   194.026k   2.92515M         4.63195    1059.55/s 3.09933G/s     2.05902M               3.26044               0.703902          1        1059.55/s [BEST: throughput=  0.69 GB/s doc_throughput=  1095 docs/s instructions=     2059021 cycles=     2922805 branch_miss=    4013 cache_miss=   11550 cache_ref=    193924 items=         1 avg_time=    914713 ns]
find_tweet<yyjson>                           1207678 ns      1207668 ns          581          46.539k           588.729M         21.642k       1.45709M    3.33533M              5.28147           932.248       3.10935G          3.45933M                    5.47784                     1.03718            932.248    46.0948k   631.515k       498.697M/s   21.6945k   1.45699M   3.54377M         5.61154    828.042/s 2.93439G/s     3.45963M               5.47831               0.976258          1        828.042/s [BEST: throughput=  0.59 GB/s doc_throughput=   932 docs/s instructions=     3459335 cycles=     3335329 branch_miss=   46539 cache_miss=   21642 cache_ref=   1457093 items=         1 avg_time=   1175540 ns]
