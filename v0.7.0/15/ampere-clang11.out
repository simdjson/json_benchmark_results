run_benchmark: v0.8.0~23 /home/jkeiser/simdjson_benchmark_results/v0.7.0/15/ampere-clang11.json -DCMAKE_BUILD_TYPE=Release
git reset --hard v0.8.0~23
HEAD is now at 22846f75 Merge pull request #1363 from simdjson/jkeiser/ondemand-benchmarks
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_RULE_MESSAGES:BOOL=OFF -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON ..
-- The simdjson repository appears to be standalone.
-- By default, we attempt to build everything.
-- Building a dynamic library.
-- Library output directory: /home/jkeiser/simdjson_benchmark_results/simdjson/build
-- Importing google_benchmarks (google/benchmark@8982e1e)
-- git Version: v0.2.1-22846f75
-- Version: 0.2.1
-- Performing Test HAVE_THREAD_SAFETY_ATTRIBUTES -- failed to compile
-- Performing Test HAVE_STD_REGEX -- success
-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile
-- Performing Test HAVE_POSIX_REGEX -- success
-- Performing Test HAVE_STEADY_CLOCK -- success
-- Importing cjson (DaveGamble/cJSON@c69134d)
-- Importing fastjson (mikeando/fastjson@485f994)
-- Importing gason (vivkin/gason@7aee524)
-- Importing jsmn (zserge/jsmn@18e9fe4)
-- Importing json (nlohmann/json@v3.9.1)
-- Importing json11 (dropbox/json11@ec4e452)
-- Importing rapidjson (Tencent/rapidjson@b32cd94)
-- Importing sajson (chadaustin/sajson@2dcfd35)
-- Importing ujson4c (esnme/ujson4c@e14f3fd)
-- Importing yyjson (ibireme/yyjson@aa33ec5)
-- Importing cxxopts (jarro2783/cxxopts@794c975)
-- cxxopts version 2.2.0
-- We have cxxopts as a dependency and we are buiding the tools (e.g., json2json).
-- Git is available and it is recent. We are enabling checkperf targets.
-- Configuring done
-- Generating done
-- Build files have been written to: /home/jkeiser/simdjson_benchmark_results/simdjson/build
make bench_ondemand
/usr/bin/cmake -S/home/jkeiser/simdjson_benchmark_results/simdjson -B/home/jkeiser/simdjson_benchmark_results/simdjson/build --check-build-system CMakeFiles/Makefile.cmake 0
make -f CMakeFiles/Makefile2 bench_ondemand
/usr/bin/cmake -S/home/jkeiser/simdjson_benchmark_results/simdjson -B/home/jkeiser/simdjson_benchmark_results/simdjson/build --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/jkeiser/simdjson_benchmark_results/simdjson/build/CMakeFiles 11
make -f CMakeFiles/Makefile2 benchmark/CMakeFiles/bench_ondemand.dir/all
make -f _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build.make _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/google_benchmarks/src /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/_deps/google_benchmarks/src /home/jkeiser/simdjson_benchmark_results/simdjson/build/_deps/google_benchmarks/src/CMakeFiles/benchmark.dir/DependInfo.cmake --color=
make -f _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build.make _deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build
make[3]: Nothing to be done for '_deps/google_benchmarks/src/CMakeFiles/benchmark.dir/build'.
[ 72%] Built target benchmark
make -f jsonexamples/generated/CMakeFiles/generated-data.dir/build.make jsonexamples/generated/CMakeFiles/generated-data.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/jsonexamples/generated /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/generated /home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/generated/CMakeFiles/generated-data.dir/DependInfo.cmake --color=
make -f jsonexamples/generated/CMakeFiles/generated-data.dir/build.make jsonexamples/generated/CMakeFiles/generated-data.dir/build
make[3]: Nothing to be done for 'jsonexamples/generated/CMakeFiles/generated-data.dir/build'.
[ 72%] Built target generated-data
make -f src/CMakeFiles/simdjson.dir/build.make src/CMakeFiles/simdjson.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/src /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/src /home/jkeiser/simdjson_benchmark_results/simdjson/build/src/CMakeFiles/simdjson.dir/DependInfo.cmake --color=
make -f src/CMakeFiles/simdjson.dir/build.make src/CMakeFiles/simdjson.dir/build
make[3]: Nothing to be done for 'src/CMakeFiles/simdjson.dir/build'.
[ 81%] Built target simdjson
make -f dependencies/CMakeFiles/yyjson.dir/build.make dependencies/CMakeFiles/yyjson.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/dependencies /home/jkeiser/simdjson_benchmark_results/simdjson/build/dependencies/CMakeFiles/yyjson.dir/DependInfo.cmake --color=
make -f dependencies/CMakeFiles/yyjson.dir/build.make dependencies/CMakeFiles/yyjson.dir/build
make[3]: Nothing to be done for 'dependencies/CMakeFiles/yyjson.dir/build'.
[ 90%] Built target yyjson
make -f benchmark/CMakeFiles/bench_ondemand.dir/build.make benchmark/CMakeFiles/bench_ondemand.dir/depend
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/jkeiser/simdjson_benchmark_results/simdjson /home/jkeiser/simdjson_benchmark_results/simdjson/benchmark /home/jkeiser/simdjson_benchmark_results/simdjson/build /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark/CMakeFiles/bench_ondemand.dir/DependInfo.cmake --color=
Scanning dependencies of target bench_ondemand
make -f benchmark/CMakeFiles/bench_ondemand.dir/build.make benchmark/CMakeFiles/bench_ondemand.dir/build
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark && /usr/bin/clang++-11  -DSIMDJSON_BENCHMARK_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/build/jsonexamples/\" -DSIMDJSON_COMPETITION_YYJSON -DSIMDJSON_MINEFIELD_TEST_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/jsonchecker/minefield/\" -DSIMDJSON_TEST_DATA_DIR=\"/home/jkeiser/simdjson_benchmark_results/simdjson/jsonchecker/\" -DSIMDJSON_THREADS_ENABLED=1 -DSIMDJSON_USING_LIBRARY=1 -I/home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/. -I/home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/linux -I/home/jkeiser/simdjson_benchmark_results/simdjson/include -I/home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/google_benchmarks/src/../include -isystem /home/jkeiser/simdjson_benchmark_results/simdjson/dependencies/.cache/yyjson/src  -O3 -DNDEBUG   -pthread -std=c++17 -o CMakeFiles/bench_ondemand.dir/bench_ondemand.cpp.o -c /home/jkeiser/simdjson_benchmark_results/simdjson/benchmark/bench_ondemand.cpp
cd /home/jkeiser/simdjson_benchmark_results/simdjson/build/benchmark && /usr/bin/cmake -E cmake_link_script CMakeFiles/bench_ondemand.dir/link.txt --verbose=1
/usr/bin/clang++-11  -O3 -DNDEBUG   CMakeFiles/bench_ondemand.dir/bench_ondemand.cpp.o  -o bench_ondemand  -Wl,-rpath,/home/jkeiser/simdjson_benchmark_results/simdjson/build ../libsimdjson.so.6.0.0 ../_deps/google_benchmarks/src/libbenchmark.a ../dependencies/libyyjson.a -pthread /usr/lib/aarch64-linux-gnu/librt.so 
[100%] Built target bench_ondemand
/usr/bin/cmake -E cmake_progress_start /home/jkeiser/simdjson_benchmark_results/simdjson/build/CMakeFiles 0
benchmark/bench_ondemand --benchmark_counters_tabular=true --benchmark_out=/home/jkeiser/simdjson_benchmark_results/v0.7.0/15/ampere-clang11.json --benchmark_out_format=json
2021-01-25 00:56:20
Running benchmark/bench_ondemand
Run on (32 X 3300 MHz CPU s)
CPU Caches:
  L1 Data 32 KiB (x32)
  L1 Instruction 32 KiB (x32)
  L2 Unified 256 KiB (x16)
Load Average: 1.01, 1.02, 1.00
simdjson::dom implementation:      arm64
simdjson::ondemand implementation: arm64
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations best_branch_miss best_bytes_per_sec best_cache_miss best_cache_ref best_cycles best_cycles_per_byte best_docs_per_sec best_frequency best_instructions best_instructions_per_byte best_instructions_per_cycle best_items_per_sec branch_miss      bytes bytes_per_second cache_miss  cache_ref     cycles cycles_per_byte docs_per_sec  frequency instructions instructions_per_byte instructions_per_cycle      items items_per_second
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
partial_tweets<simdjson_dom>                 1597775 ns      1597792 ns          439          13.521k           402.831M         25.974k       961.233k    5.01766M              7.94543            637.88       3.20066G          3.94988M                    6.25461                    0.787196            63.788k    13.6183k   631.515k       376.932M/s   25.9679k   961.855k   5.02849M         7.96258    625.864/s 3.14715G/s     3.94988M               6.25461               0.785501        100       62.5864k/s [BEST: throughput=  0.40 GB/s doc_throughput=   637 docs/s instructions=     3949882 cycles=     5017659 branch_miss=   13521 cache_miss=   25974 cache_ref=    961233 items=       100 avg_time=   1572676 ns]
partial_tweets<simdjson_ondemand>            1077297 ns      1077291 ns          649           8.961k           603.122M         22.824k       445.654k    3.35186M              5.30764            955.04       3.20115G          2.72439M                    4.31406                    0.812802            95.504k    9.42811k   631.515k        559.05M/s   22.8517k   447.425k   3.36517M         5.32872    928.254/s 3.12373G/s     2.72439M               4.31406               0.809586        100       92.8254k/s [BEST: throughput=  0.60 GB/s doc_throughput=   955 docs/s instructions=     2724393 cycles=     3351855 branch_miss=    8961 cache_miss=   22824 cache_ref=    445654 items=       100 avg_time=   1052385 ns]
partial_tweets<yyjson>                       1310934 ns      1230168 ns          572          45.519k           578.941M         24.183k       1.40672M    3.38655M              5.36258            916.75       3.10462G          3.27028M                    5.17848                    0.965668            91.675k    45.6519k   631.515k       489.575M/s    24.249k     1.408M   3.61751M          5.7283    812.897/s 2.94066G/s     3.27059M               5.17895                 0.9041        100       81.2897k/s [BEST: throughput=  0.58 GB/s doc_throughput=   916 docs/s instructions=     3270285 cycles=     3386552 branch_miss=   45519 cache_miss=   24183 cache_ref=   1406719 items=       100 avg_time=   1283624 ns]
Creating a source file spanning 44921 KB 
large_random<simdjson_dom>                 310219881 ns    310214280 ns            2         1.95299M           148.334M        3.98118M       231.982M    991.345M              21.5516           3.22474       3.19683G          1040.92M                    22.6292                        1.05            3.22474    1.95226M   45.9988M       141.411M/s   3.98119M   231.979M   991.519M         21.5553    3.22358/s 3.19624G/s     1040.92M               22.6292                1.04982          1        3.22358/s [BEST: throughput=  0.15 GB/s doc_throughput=     3 docs/s instructions=  1040915692 cycles=   991344993 branch_miss= 1952994 cache_miss= 3981183 cache_ref= 231982164 items=         1 avg_time= 310161526 ns]
large_random<simdjson_ondemand>            197506145 ns    197504078 ns            4         1.18891M           232.981M        2.31728M       143.275M    631.227M              13.7227           5.06495       3.19713G          662.774M                    14.4085                     1.04998            5.06495      1.189M   45.9988M       222.111M/s   2.31728M   143.275M   631.233M         13.7228    5.06319/s 3.19605G/s     662.774M               14.4085                1.04997          1        5.06319/s [BEST: throughput=  0.23 GB/s doc_throughput=     5 docs/s instructions=   662773946 cycles=   631227249 branch_miss= 1188914 cache_miss= 2317276 cache_ref= 143274727 items=         1 avg_time= 197450401 ns]
large_random<simdjson_ondemand_unordered>  187531116 ns    187528917 ns            4         1.19383M           245.399M        2.31728M       141.209M    599.326M              13.0292           5.33491       3.19735G          674.774M                    14.6694                     1.12589            5.33491    1.19377M   45.9988M       233.926M/s   2.31728M   141.209M   599.336M         13.0294    5.33251/s 3.19596G/s     674.774M               14.6694                1.12587          1        5.33251/s [BEST: throughput=  0.25 GB/s doc_throughput=     5 docs/s instructions=   674773943 cycles=   599326089 branch_miss= 1193831 cache_miss= 2317276 cache_ref= 141209369 items=         1 avg_time= 187473249 ns]
large_random<yyjson>                       206968008 ns    206964542 ns            3         1.63206M           222.476M        4.91455M       205.756M    635.307M              13.8114           4.83655        3.0727G          816.384M                     17.748                     1.28502            4.83655    1.64356M   45.9988M       211.958M/s   4.91469M   205.739M   635.723M         13.8204    4.83175/s 3.07165G/s     816.384M                17.748                1.28418          1        4.83175/s [BEST: throughput=  0.22 GB/s doc_throughput=     4 docs/s instructions=   816384389 cycles=   635307301 branch_miss= 1632062 cache_miss= 4914547 cache_ref= 205755531 items=         1 avg_time= 206907238 ns]
Creating a source file spanning 134087 KB 
kostya<simdjson_dom>                       377323617 ns    377319080 ns            2           880.9k           363.994M        6.95144M        248.84M     1.2058G              8.78193           2.65099       3.19657G           1.1314G                    8.24004                    0.938295            2.65099    881.292k   137.305M       347.038M/s    6.9514M   248.842M   1.20592G         8.78277    2.65028/s 3.19602G/s      1.1314G               8.24004               0.938206          1        2.65028/s [BEST: throughput=  0.36 GB/s doc_throughput=     2 docs/s instructions=  1131399191 cycles=  1205803524 branch_miss=  880900 cache_miss= 6951436 cache_ref= 248839832 items=         1 avg_time= 377259428 ns]
kostya<simdjson_ondemand>                  255872902 ns    255869423 ns            3         884.954k           536.768M         5.2832M       145.047M    817.739M              5.95564           3.90931        3.1968G          791.061M                    5.76134                    0.967376            3.90931    884.964k   137.305M       511.762M/s   5.28328M   145.046M   817.752M         5.95574    3.90824/s 3.19598G/s     791.061M               5.76134                0.96736          1        3.90824/s [BEST: throughput=  0.54 GB/s doc_throughput=     3 docs/s instructions=   791060726 cycles=   817738777 branch_miss=  884954 cache_miss= 5283195 cache_ref= 145047496 items=         1 avg_time= 255814710 ns]
------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations
------------------------------------------------------------------------------------
kostya<yyjson>                            ERROR OCCURRED: 'warmup document reading failed'
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Benchmark                                          Time             CPU   Iterations best_branch_miss best_bytes_per_sec best_cache_miss best_cache_ref best_cycles best_cycles_per_byte best_docs_per_sec best_frequency best_instructions best_instructions_per_byte best_instructions_per_cycle best_items_per_sec branch_miss      bytes bytes_per_second cache_miss  cache_ref     cycles cycles_per_byte docs_per_sec  frequency instructions instructions_per_byte instructions_per_cycle      items items_per_second
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
distinct_user_id<simdjson_dom>               1607795 ns      1607786 ns          435          13.386k           405.869M         26.511k       947.255k    4.98028M              7.88624            642.69       3.20078G          3.87901M                    6.14239                    0.778875           73.9094k    13.3623k   631.515k       374.589M/s   26.5067k   949.433k   5.03559M         7.97382    621.973/s   3.132G/s     3.87901M               6.14239               0.770319        115       71.5269k/s [BEST: throughput=  0.41 GB/s doc_throughput=   642 docs/s instructions=     3879014 cycles=     4980277 branch_miss=   13386 cache_miss=   26511 cache_ref=    947255 items=       115 avg_time=   1574953 ns]
distinct_user_id<simdjson_ondemand>          1062761 ns      1062759 ns          659           8.351k           614.654M         22.583k       424.175k    3.28894M              5.20801             973.3       3.20112G          2.66992M                     4.2278                    0.811788            111.93k    8.53322k   631.515k       566.695M/s   22.5919k   424.833k   3.29435M         5.21659    940.948/s 3.09981G/s     2.66992M                4.2278               0.810453        115       108.209k/s [BEST: throughput=  0.61 GB/s doc_throughput=   973 docs/s instructions=     2669919 cycles=     3288938 branch_miss=    8351 cache_miss=   22583 cache_ref=    424175 items=       115 avg_time=   1030186 ns]
distinct_user_id<yyjson>                     1218670 ns      1218684 ns          579          45.906k           575.064M         24.211k       1.39419M    3.44921M              5.46181            910.61       3.14089G          3.23372M                    5.12057                    0.937523            104.72k    45.7634k   631.515k       494.189M/s   24.2539k   1.39504M   3.55528M         5.62976    820.557/s 2.91731G/s     3.23387M               5.12082               0.909598        115       94.3641k/s [BEST: throughput=  0.58 GB/s doc_throughput=   910 docs/s instructions=     3233717 cycles=     3449214 branch_miss=   45906 cache_miss=   24211 cache_ref=   1394191 items=       115 avg_time=   1183053 ns]
find_tweet<simdjson_dom>                     1553821 ns      1553808 ns          451          13.163k           419.325M         23.497k       928.918k    4.78888M              7.58316           663.999       3.17981G           3.7886M                    5.99923                    0.791125            663.999     13.172k   631.515k       387.602M/s   23.4987k   931.987k   4.86566M         7.70474     643.58/s 3.13144G/s      3.7886M               5.99923               0.778641          1         643.58/s [BEST: throughput=  0.42 GB/s doc_throughput=   663 docs/s instructions=     3788603 cycles=     4788882 branch_miss=   13163 cache_miss=   23497 cache_ref=    928918 items=         1 avg_time=   1521772 ns]
find_tweet<simdjson_ondemand>                 939189 ns       939185 ns          746           4.774k           698.621M          11.56k       234.851k     2.8942M              4.58294          1.10626k       3.20174G          2.11682M                    3.35197                    0.731401           1.10626k    5.09532k   631.515k       641.257M/s   11.5669k   235.596k   2.90239M         4.59591    1064.75/s 3.09033G/s     2.11682M               3.35197               0.729337          1        1064.75/s [BEST: throughput=  0.70 GB/s doc_throughput=  1106 docs/s instructions=     2116817 cycles=     2894196 branch_miss=    4774 cache_miss=   11560 cache_ref=    234851 items=         1 avg_time=    907729 ns]
find_tweet<yyjson>                           1167900 ns      1167914 ns          600          45.649k           600.877M         21.704k       1.37856M    3.29022M              5.21004           951.486       3.13059G          3.17702M                    5.03079                    0.965596            951.486    45.6159k   631.515k       515.671M/s   21.7428k   1.37947M   3.39876M         5.38191    856.227/s 2.91011G/s     3.17724M               5.03114               0.934824          1        856.227/s [BEST: throughput=  0.60 GB/s doc_throughput=   951 docs/s instructions=     3177018 cycles=     3290216 branch_miss=   45649 cache_miss=   21704 cache_ref=   1378563 items=         1 avg_time=   1133993 ns]
