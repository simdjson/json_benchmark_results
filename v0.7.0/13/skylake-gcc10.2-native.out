run_benchmark: v0.8.0~25 /home/jkeiser/simdjson_benchmark_results/v0.7.0/13/skylake-gcc10.2-native.json -DCMAKE_CXX_FLAGS=-march=native
git reset --hard v0.8.0~25
HEAD is now at 158a3c53 Merge pull request #1351 from simdjson/jkeiser/unordered-lookup
cmake -DCMAKE_CXX_FLAGS=-march=native ..
-- The simdjson repository appears to be standalone.
-- By default, we attempt to build everything.
-- Building a dynamic library.
-- Library output directory: /home/jkeiser/simdjson_benchmark_results/simdjson/build
-- Importing google_benchmarks (google/benchmark@8982e1e)
-- Failed to find LLVM FileCheck
-- git Version: v0.2.1-158a3c53
-- Version: 0.2.1
-- Performing Test HAVE_STD_REGEX -- success
-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile
-- Performing Test HAVE_POSIX_REGEX -- success
-- Performing Test HAVE_STEADY_CLOCK -- success
-- Importing cjson (DaveGamble/cJSON@c69134d)
-- Importing fastjson (mikeando/fastjson@485f994)
-- Importing gason (vivkin/gason@7aee524)
-- Importing jsmn (zserge/jsmn@18e9fe4)
-- Importing json (nlohmann/json@v3.9.1)
-- Importing json11 (dropbox/json11@ec4e452)
-- Importing rapidjson (Tencent/rapidjson@b32cd94)
-- Importing sajson (chadaustin/sajson@2dcfd35)
-- Importing ujson4c (esnme/ujson4c@e14f3fd)
-- Importing yyjson (ibireme/yyjson@aa33ec5)
-- Importing cxxopts (jarro2783/cxxopts@794c975)
-- cxxopts version 2.2.0
-- We have cxxopts as a dependency and we are buiding the tools (e.g., json2json).
-- Git is available and it is recent. We are enabling checkperf targets.
-- Configuring done
-- Generating done
-- Build files have been written to: /home/jkeiser/simdjson_benchmark_results/simdjson/build
make bench_ondemand
make[1]: Entering directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
make[2]: Entering directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
make[3]: Entering directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
make[3]: Leaving directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
[ 87%] Built target benchmark
make[3]: Entering directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
make[3]: Leaving directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
[ 87%] Built target generated-data
make[3]: Entering directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
make[3]: Leaving directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
[ 87%] Built target simdjson
make[3]: Entering directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
Scanning dependencies of target bench_ondemand
make[3]: Leaving directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
make[3]: Entering directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
[ 87%] Building CXX object benchmark/CMakeFiles/bench_ondemand.dir/bench_ondemand.cpp.o
[100%] Linking CXX executable bench_ondemand
make[3]: Leaving directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
[100%] Built target bench_ondemand
make[2]: Leaving directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
make[1]: Leaving directory '/home/jkeiser/simdjson_benchmark_results/simdjson/build'
benchmark/bench_ondemand --benchmark_counters_tabular=true --benchmark_out=/home/jkeiser/simdjson_benchmark_results/v0.7.0/13/skylake-gcc10.2-native.json --benchmark_out_format=json
2021-01-23 04:59:50
Running benchmark/bench_ondemand
Run on (4 X 4000 MHz CPU s)
CPU Caches:
  L1 Data 32 KiB (x4)
  L1 Instruction 32 KiB (x4)
  L2 Unified 256 KiB (x4)
  L3 Unified 8192 KiB (x1)
Load Average: 1.00, 1.00, 1.00
On Demand implementation: haswell
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Benchmark                               Time             CPU   Iterations best_branch_miss best_bytes_per_sec best_cache_miss best_cache_ref best_cycles best_cycles_per_byte best_docs_per_sec best_frequency best_instructions best_instructions_per_byte best_instructions_per_cycle best_items_per_sec branch_miss      bytes bytes_per_second cache_miss  cache_ref     cycles cycles_per_byte docs_per_sec  frequency instructions instructions_per_byte instructions_per_cycle      items items_per_second
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PartialTweets<OnDemand>            190124 ns       190126 ns         3681           1.622k           3.49197G               0         54.69k    667.828k               1.0575          5.52951k       3.69276G          2.14687M                    3.39955                      3.2147           552.951k     1.7575k   631.515k       3.09345G/s   5.97664m   54.6887k   672.384k         1.06472   5.25968k/s 3.53652G/s     2.14687M               3.39955                3.19292        100       525.968k/s [best: throughput=  3.49 GB/s doc_throughput=  5529 docs/s instructions=     2146868 cycles=      667828 branch_miss=    1622 cache_miss=       0 cache_ref=     54690 items=       100 avg_time=    182169 ns]
PartialTweets<Dom>                 268877 ns       268879 ns         2599           3.661k           2.43517G               0        87.022k    957.522k              1.51623          3.85608k       3.69228G          2.91501M                    4.61589                     3.04432           385.608k    3.80315k   631.515k       2.18739G/s  0.0327049   87.1711k   962.387k         1.52393   3.71914k/s 3.57926G/s     2.91501M               4.61589                3.02893        100       371.914k/s [best: throughput=  2.44 GB/s doc_throughput=  3856 docs/s instructions=     2915006 cycles=      957522 branch_miss=    3661 cache_miss=       0 cache_ref=     87022 items=       100 avg_time=    260773 ns]
Creating a source file spanning 44921 KB 
LargeRandom<Dom>                 92118244 ns     92117685 ns            8         867.636k           500.247M        10.9747M       15.2245M    339.185M              7.37378           10.8752       3.68871G          972.675M                    21.1457                     2.86768           10.8752M    865.161k   45.9988M       476.215M/s   10.9516M   15.2248M   339.755M         7.38617    10.8557/s 3.68827G/s     972.675M               21.1457                2.86287      1000k       10.8557M/s [best: throughput=  0.50 GB/s doc_throughput=    10 docs/s instructions=   972674944 cycles=   339184844 branch_miss=  867636 cache_miss=10974667 cache_ref=  15224453 items=   1000000 avg_time=  92104356 ns]
LargeRandom<OnDemand>            58241469 ns     58240670 ns           12         866.253k           790.631M        5.54003M       7.88651M    214.633M              4.66606           17.1881       3.68913G          644.053M                    14.0015                     3.00072           17.1881M    866.467k   45.9988M       753.217M/s   5.60646M   7.88867M   214.793M         4.66955    17.1701/s 3.68803G/s     644.053M               14.0015                2.99847      1000k       17.1701M/s [best: throughput=  0.79 GB/s doc_throughput=    17 docs/s instructions=   644052561 cycles=   214632865 branch_miss=  866253 cache_miss= 5540030 cache_ref=   7886510 items=   1000000 avg_time=  58229330 ns]
LargeRandom<OnDemandUnordered>   62426243 ns     62425793 ns           11         869.345k           737.895M        5.53735M       7.89069M     229.97M              4.99948           16.0416       3.68909G          648.053M                    14.0885                     2.81799           16.0416M    870.359k   45.9988M        702.72M/s   5.61426M   7.89537M   230.224M           5.005     16.019/s 3.68796G/s     648.053M               14.0885                2.81488      1000k        16.019M/s [best: throughput=  0.74 GB/s doc_throughput=    16 docs/s instructions=   648052566 cycles=   229970152 branch_miss=  869345 cache_miss= 5537354 cache_ref=   7890688 items=   1000000 avg_time=  62413285 ns]
Creating a source file spanning 134087 KB 
Kostya<Dom>                      86074234 ns     86073550 ns            8          438.78k           1.59816G         15.659M       21.9828M    316.936M              2.30826           11.6395       3.68898G          937.516M                    6.82798                     2.95806           6.10246M     438.83k   137.305M       1.48565G/s   15.6993M    22.042M   317.457M         2.31206     11.618/s 3.68821G/s     937.516M               6.82798                 2.9532   524.288k       6.09116M/s [best: throughput=  1.60 GB/s doc_throughput=    11 docs/s instructions=   937516413 cycles=   316936167 branch_miss=  438780 cache_miss=15659044 cache_ref=  21982837 items=    524288 avg_time=  86059904 ns]
KostyaSum<Dom>                   86202145 ns     86199877 ns            8         439.522k           1.59542G        15.3962M       21.5161M    317.474M              2.31218           11.6195        3.6889G          940.138M                    6.84708                      2.9613           6.09198M    439.173k   137.305M       1.48347G/s     15.45M   21.5821M   317.917M         2.31541    11.6009/s 3.68813G/s     940.138M               6.84708                2.95718   524.288k       6.08224M/s [best: throughput=  1.60 GB/s doc_throughput=    11 docs/s instructions=   940137868 cycles=   317474475 branch_miss=  439522 cache_miss=15396151 cache_ref=  21516087 items=    524288 avg_time=  86187565 ns]
Kostya<OnDemand>                 63383212 ns     63382638 ns           11         452.344k           2.16857G        9.98721M       13.8214M    233.573M              1.70112           15.7938       3.68901G          687.627M                    5.00803                     2.94395           8.28051M    452.484k   137.305M       2.01751G/s   9.99928M   13.8238M   233.759M         1.70248    15.7772/s 3.68806G/s     687.627M               5.00803                 2.9416   524.288k       8.27179M/s [best: throughput=  2.17 GB/s doc_throughput=    15 docs/s instructions=   687627127 cycles=   233572866 branch_miss=  452344 cache_miss= 9987210 cache_ref=  13821430 items=    524288 avg_time=  63369560 ns]
KostyaSum<OnDemand>              62751760 ns     62752130 ns           11         452.968k           2.19495G        9.64966M       13.3572M    230.759M              1.68063           15.9859       3.68889G          684.481M                    4.98512                     2.96622           8.38123M    452.592k   137.305M       2.03778G/s   9.68977M   13.4159M   231.424M         1.68547    15.9357/s  3.6879G/s     684.481M               4.98512                 2.9577   524.288k        8.3549M/s [best: throughput=  2.19 GB/s doc_throughput=    15 docs/s instructions=   684481393 cycles=   230758567 branch_miss=  452968 cache_miss= 9649663 cache_ref=  13357247 items=    524288 avg_time=  62738373 ns]
DistinctUserID<Dom>                265717 ns       265719 ns         2583           3.882k           2.46984G               0        88.321k    944.065k              1.49492          3.91097k       3.69221G          2.86553M                    4.53755                     3.03531           449.762k    4.12195k   631.515k       2.21341G/s    1.10801   88.5106k   950.607k         1.50528   3.76337k/s 3.57749G/s     2.86553M               4.53756                3.01443        115       432.788k/s [best: throughput=  2.47 GB/s doc_throughput=  3910 docs/s instructions=     2865534 cycles=      944065 branch_miss=    3882 cache_miss=       0 cache_ref=     88321 items=       115 avg_time=    257596 ns]
On Demand implementation: haswell
DistinctUserID<OnDemand>           184540 ns       184539 ns         3862           1.712k           3.60678G               0        53.348k    646.473k              1.02369          5.71132k       3.69221G          2.11376M                    3.34713                     3.26968           656.801k    1.78956k   631.515k        3.1871G/s   4.14293m   53.3865k   651.887k         1.03226    5.4189k/s 3.53251G/s     2.11376M               3.34713                3.24253        115       623.174k/s [best: throughput=  3.61 GB/s doc_throughput=  5711 docs/s instructions=     2113763 cycles=      646473 branch_miss=    1712 cache_miss=       0 cache_ref=     53348 items=       115 avg_time=    176632 ns]
FindTweet<Dom>                     256151 ns       256152 ns         2769           3.436k           2.56371G               0        78.271k    909.562k              1.44029          4.05961k       3.69247G          2.77501M                    4.39422                     3.05093           4.05961k    3.59053k   631.515k       2.29607G/s   0.130372   78.3165k   915.302k         1.44937   3.90393k/s 3.57327G/s     2.77501M               4.39422                 3.0318          1       3.90393k/s [best: throughput=  2.56 GB/s doc_throughput=  4059 docs/s instructions=     2775014 cycles=      909562 branch_miss=    3436 cache_miss=       0 cache_ref=     78271 items=         1 avg_time=    248018 ns]
On Demand implementation: haswell
FindTweet<OnDemand>                126871 ns       126870 ns         5549              653           5.33185G               0        28.431k    437.373k             0.692577          8.44295k       3.69272G          1.48077M                    2.34479                     3.38559           8.44295k     712.416   631.515k        4.6358G/s  0.0962336   28.4435k   439.164k        0.695413   7.88208k/s 3.46152G/s     1.48077M               2.34479                3.37179          1       7.88208k/s [best: throughput=  5.33 GB/s doc_throughput=  8442 docs/s instructions=     1480767 cycles=      437373 branch_miss=     653 cache_miss=       0 cache_ref=     28431 items=         1 avg_time=    118977 ns]
